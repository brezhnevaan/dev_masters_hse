2025-03-30 21:28:02,580 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 21:28:02,612 - database - INFO - Database connection established successfully
2025-03-30 21:28:02,696 - app - INFO - Initializing FastAPI application
2025-03-30 21:28:02,696 - app - INFO - Including auth routers
2025-03-30 21:28:02,719 - app - INFO - Including links router
2025-03-30 21:28:02,729 - app - INFO - Application initialized successfully
2025-03-30 21:28:02,730 - root - INFO - Starting background tasks
2025-03-30 21:28:02,730 - root - INFO - Starting expired links cleanup task
2025-03-30 21:28:02,731 - root - INFO - Starting expired links cleanup
2025-03-30 21:28:02,763 - root - INFO - Found 1 expired links
2025-03-30 21:28:02,764 - root - INFO - Deleting expired link hse_test (no user_id)
2025-03-30 21:28:02,764 - root - INFO - Cache: Deleting link hse_test
2025-03-30 21:28:02,766 - root - INFO - Cache: Link hse_test deleted successfully
2025-03-30 21:28:02,769 - root - INFO - Successfully processed 1 expired links
2025-03-30 21:28:55,798 - database - INFO - Created new database session
2025-03-30 21:28:55,812 - database - ERROR - Error creating database session: can't compare offset-naive and offset-aware datetimes
2025-03-30 21:29:35,158 - root - INFO - Stopping background tasks
2025-03-30 21:29:35,159 - root - INFO - Cleanup task cancelled successfully
2025-03-30 21:29:36,142 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 21:29:36,162 - database - INFO - Database connection established successfully
2025-03-30 21:29:36,242 - app - INFO - Initializing FastAPI application
2025-03-30 21:29:36,242 - app - INFO - Including auth routers
2025-03-30 21:29:36,269 - app - INFO - Including links router
2025-03-30 21:29:36,278 - app - INFO - Application initialized successfully
2025-03-30 21:29:36,279 - root - INFO - Starting background tasks
2025-03-30 21:29:36,279 - root - INFO - Starting expired links cleanup task
2025-03-30 21:29:36,279 - root - INFO - Starting expired links cleanup
2025-03-30 21:29:36,308 - root - INFO - No expired links found
2025-03-30 21:30:43,455 - root - INFO - Stopping background tasks
2025-03-30 21:30:43,456 - root - INFO - Cleanup task cancelled successfully
2025-03-30 21:30:44,686 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 21:30:44,707 - database - INFO - Database connection established successfully
2025-03-30 21:30:44,782 - app - INFO - Initializing FastAPI application
2025-03-30 21:30:44,783 - app - INFO - Including auth routers
2025-03-30 21:30:44,802 - app - INFO - Including links router
2025-03-30 21:30:44,813 - app - INFO - Application initialized successfully
2025-03-30 21:30:44,814 - root - INFO - Starting background tasks
2025-03-30 21:30:44,815 - root - INFO - Starting expired links cleanup task
2025-03-30 21:30:44,815 - root - INFO - Starting expired links cleanup
2025-03-30 21:30:44,836 - root - INFO - No expired links found
2025-03-30 21:30:49,956 - database - INFO - Created new database session
2025-03-30 21:30:49,967 - database - ERROR - Error creating database session: can't compare offset-naive and offset-aware datetimes
2025-03-30 21:30:58,495 - database - INFO - Created new database session
2025-03-30 21:30:58,507 - database - ERROR - Error creating database session: can't compare offset-naive and offset-aware datetimes
2025-03-30 21:31:07,066 - root - INFO - Stopping background tasks
2025-03-30 21:31:07,067 - root - INFO - Cleanup task cancelled successfully
2025-03-30 21:31:15,052 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 21:31:15,073 - database - INFO - Database connection established successfully
2025-03-30 21:31:15,144 - app - INFO - Initializing FastAPI application
2025-03-30 21:31:15,145 - app - INFO - Including auth routers
2025-03-30 21:31:15,163 - app - INFO - Including links router
2025-03-30 21:31:15,174 - app - INFO - Application initialized successfully
2025-03-30 21:31:15,175 - root - INFO - Starting background tasks
2025-03-30 21:31:15,175 - root - INFO - Starting expired links cleanup task
2025-03-30 21:31:15,175 - root - INFO - Starting expired links cleanup
2025-03-30 21:31:15,194 - root - INFO - No expired links found
2025-03-30 21:31:22,423 - database - INFO - Created new database session
2025-03-30 21:31:22,435 - database - ERROR - Error creating database session: can't compare offset-naive and offset-aware datetimes
2025-03-30 21:31:57,867 - root - INFO - Stopping background tasks
2025-03-30 21:31:57,867 - root - INFO - Cleanup task cancelled successfully
2025-03-30 21:31:58,919 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 21:31:58,942 - database - INFO - Database connection established successfully
2025-03-30 21:31:59,028 - app - INFO - Initializing FastAPI application
2025-03-30 21:31:59,029 - app - INFO - Including auth routers
2025-03-30 21:31:59,050 - app - INFO - Including links router
2025-03-30 21:31:59,065 - app - INFO - Application initialized successfully
2025-03-30 21:31:59,065 - root - INFO - Starting background tasks
2025-03-30 21:31:59,066 - root - INFO - Starting expired links cleanup task
2025-03-30 21:31:59,066 - root - INFO - Starting expired links cleanup
2025-03-30 21:31:59,086 - root - INFO - No expired links found
2025-03-30 21:32:20,200 - database - INFO - Created new database session
2025-03-30 21:32:20,211 - database - ERROR - Error creating database session: can't compare offset-naive and offset-aware datetimes
2025-03-30 21:32:47,046 - root - INFO - Stopping background tasks
2025-03-30 21:32:47,046 - root - INFO - Cleanup task cancelled successfully
2025-03-30 21:32:48,054 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 21:32:48,075 - database - INFO - Database connection established successfully
2025-03-30 21:32:48,155 - app - INFO - Initializing FastAPI application
2025-03-30 21:32:48,155 - app - INFO - Including auth routers
2025-03-30 21:32:48,176 - app - INFO - Including links router
2025-03-30 21:32:48,187 - app - INFO - Application initialized successfully
2025-03-30 21:32:48,188 - root - INFO - Starting background tasks
2025-03-30 21:32:48,188 - root - INFO - Starting expired links cleanup task
2025-03-30 21:32:48,188 - root - INFO - Starting expired links cleanup
2025-03-30 21:32:48,210 - root - INFO - No expired links found
2025-03-30 21:33:13,038 - root - INFO - Stopping background tasks
2025-03-30 21:33:13,039 - root - INFO - Cleanup task cancelled successfully
2025-03-30 21:33:21,531 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 21:33:21,550 - database - INFO - Database connection established successfully
2025-03-30 21:33:21,619 - app - INFO - Initializing FastAPI application
2025-03-30 21:33:21,620 - app - INFO - Including auth routers
2025-03-30 21:33:21,639 - app - INFO - Including links router
2025-03-30 21:33:21,650 - app - INFO - Application initialized successfully
2025-03-30 21:33:21,650 - root - INFO - Starting background tasks
2025-03-30 21:33:21,651 - root - INFO - Starting expired links cleanup task
2025-03-30 21:33:21,651 - root - INFO - Starting expired links cleanup
2025-03-30 21:33:21,670 - root - INFO - No expired links found
2025-03-30 21:33:30,532 - database - INFO - Created new database session
2025-03-30 21:33:30,544 - database - ERROR - Error creating database session: can't compare offset-naive and offset-aware datetimes
2025-03-30 21:34:04,574 - root - INFO - Stopping background tasks
2025-03-30 21:34:04,575 - root - INFO - Cleanup task cancelled successfully
2025-03-30 21:34:06,289 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 21:34:06,318 - database - INFO - Database connection established successfully
2025-03-30 21:34:06,392 - app - INFO - Initializing FastAPI application
2025-03-30 21:34:06,393 - app - INFO - Including auth routers
2025-03-30 21:34:06,412 - app - INFO - Including links router
2025-03-30 21:34:06,424 - app - INFO - Application initialized successfully
2025-03-30 21:34:06,425 - root - INFO - Starting background tasks
2025-03-30 21:34:06,425 - root - INFO - Starting expired links cleanup task
2025-03-30 21:34:06,425 - root - INFO - Starting expired links cleanup
2025-03-30 21:34:06,461 - root - INFO - No expired links found
2025-03-30 21:34:34,709 - database - INFO - Created new database session
2025-03-30 21:34:34,736 - database - ERROR - Error creating database session: can't compare offset-naive and offset-aware datetimes
2025-03-30 21:35:09,600 - root - INFO - Stopping background tasks
2025-03-30 21:35:09,600 - root - INFO - Cleanup task cancelled successfully
2025-03-30 21:35:10,802 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 21:35:10,832 - database - INFO - Database connection established successfully
2025-03-30 21:35:10,917 - app - INFO - Initializing FastAPI application
2025-03-30 21:35:10,917 - app - INFO - Including auth routers
2025-03-30 21:35:10,937 - app - INFO - Including links router
2025-03-30 21:35:10,950 - app - INFO - Application initialized successfully
2025-03-30 21:35:10,951 - root - INFO - Starting background tasks
2025-03-30 21:35:10,951 - root - INFO - Starting expired links cleanup task
2025-03-30 21:35:10,951 - root - INFO - Starting expired links cleanup
2025-03-30 21:35:10,974 - root - INFO - No expired links found
2025-03-30 21:35:34,922 - database - INFO - Created new database session
2025-03-30 21:35:34,935 - database - ERROR - Error creating database session: can't compare offset-naive and offset-aware datetimes
2025-03-30 21:36:25,909 - root - INFO - Stopping background tasks
2025-03-30 21:36:25,910 - root - INFO - Cleanup task cancelled successfully
2025-03-30 21:36:27,120 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 21:36:27,146 - database - INFO - Database connection established successfully
2025-03-30 21:36:27,226 - app - INFO - Initializing FastAPI application
2025-03-30 21:36:27,227 - app - INFO - Including auth routers
2025-03-30 21:36:27,246 - app - INFO - Including links router
2025-03-30 21:36:27,257 - app - INFO - Application initialized successfully
2025-03-30 21:36:27,257 - root - INFO - Starting background tasks
2025-03-30 21:36:27,257 - root - INFO - Starting expired links cleanup task
2025-03-30 21:36:27,258 - root - INFO - Starting expired links cleanup
2025-03-30 21:36:27,279 - root - INFO - No expired links found
2025-03-30 21:37:05,282 - root - INFO - Stopping background tasks
2025-03-30 21:37:05,283 - root - INFO - Cleanup task cancelled successfully
2025-03-30 21:37:06,211 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 21:37:06,231 - database - INFO - Database connection established successfully
2025-03-30 21:37:06,308 - app - INFO - Initializing FastAPI application
2025-03-30 21:37:06,308 - app - INFO - Including auth routers
2025-03-30 21:37:06,331 - app - INFO - Including links router
2025-03-30 21:37:06,343 - app - INFO - Application initialized successfully
2025-03-30 21:37:06,344 - root - INFO - Starting background tasks
2025-03-30 21:37:06,345 - root - INFO - Starting expired links cleanup task
2025-03-30 21:37:06,345 - root - INFO - Starting expired links cleanup
2025-03-30 21:37:06,367 - root - INFO - No expired links found
2025-03-30 21:37:09,138 - database - INFO - Created new database session
2025-03-30 21:37:09,164 - root - INFO - Creating link with hard expire: expires_at=2025-03-30 18:33:27.846000+00:00, is_soft_expire=False
2025-03-30 21:37:09,170 - database - ERROR - Error creating database session: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $5: datetime.datetime(2025, 3, 30, 18, 33, 2... (can't subtract offset-naive and offset-aware datetimes)
[SQL: INSERT INTO links (user_id, original_url, short_code, created_at, expires_at, is_soft_expire, last_click_at, clicks) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::TIMESTAMP WITHOUT TIME ZONE, $5::TIMESTAMP WITHOUT TIME ZONE, $6::BOOLEAN, $7::TIMESTAMP WITHOUT TIME ZONE, $8::INTEGER) RETURNING links.id]
[parameters: (None, 'https://example.com/', 'string', datetime.datetime(2025, 3, 30, 18, 37, 9, 165823), datetime.datetime(2025, 3, 30, 18, 33, 27, 846000, tzinfo=TzInfo(UTC)), False, None, 0)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-03-30 21:39:42,652 - root - INFO - Stopping background tasks
2025-03-30 21:39:42,653 - root - INFO - Cleanup task cancelled successfully
2025-03-30 21:39:43,860 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 21:39:43,890 - database - INFO - Database connection established successfully
2025-03-30 21:39:43,979 - app - INFO - Initializing FastAPI application
2025-03-30 21:39:43,979 - app - INFO - Including auth routers
2025-03-30 21:39:43,998 - app - INFO - Including links router
2025-03-30 21:39:44,010 - app - INFO - Application initialized successfully
2025-03-30 21:39:44,011 - root - INFO - Starting background tasks
2025-03-30 21:39:44,011 - root - INFO - Starting expired links cleanup task
2025-03-30 21:39:44,011 - root - INFO - Starting expired links cleanup
2025-03-30 21:39:44,034 - root - INFO - No expired links found
2025-03-30 21:39:45,966 - root - INFO - Stopping background tasks
2025-03-30 21:39:45,966 - root - INFO - Cleanup task cancelled successfully
2025-03-30 21:39:46,967 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 21:39:46,987 - database - INFO - Database connection established successfully
2025-03-30 21:39:47,065 - app - INFO - Initializing FastAPI application
2025-03-30 21:39:47,066 - app - INFO - Including auth routers
2025-03-30 21:39:47,087 - app - INFO - Including links router
2025-03-30 21:39:47,098 - app - INFO - Application initialized successfully
2025-03-30 21:39:47,099 - root - INFO - Starting background tasks
2025-03-30 21:39:47,099 - root - INFO - Starting expired links cleanup task
2025-03-30 21:39:47,099 - root - INFO - Starting expired links cleanup
2025-03-30 21:39:47,120 - root - INFO - No expired links found
2025-03-30 21:40:41,499 - root - INFO - Stopping background tasks
2025-03-30 21:40:41,500 - root - INFO - Cleanup task cancelled successfully
2025-03-30 21:40:43,132 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 21:40:43,171 - database - INFO - Database connection established successfully
2025-03-30 21:40:43,302 - app - INFO - Initializing FastAPI application
2025-03-30 21:40:43,302 - app - INFO - Including auth routers
2025-03-30 21:40:43,329 - app - INFO - Including links router
2025-03-30 21:40:43,343 - app - INFO - Application initialized successfully
2025-03-30 21:40:43,344 - root - INFO - Starting background tasks
2025-03-30 21:40:43,345 - root - INFO - Starting expired links cleanup task
2025-03-30 21:40:43,345 - root - INFO - Starting expired links cleanup
2025-03-30 21:40:43,370 - root - INFO - No expired links found
2025-03-30 21:42:06,228 - root - INFO - Stopping background tasks
2025-03-30 21:42:06,228 - root - INFO - Cleanup task cancelled successfully
2025-03-30 21:42:07,520 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 21:42:07,558 - database - INFO - Database connection established successfully
2025-03-30 21:42:07,650 - app - INFO - Initializing FastAPI application
2025-03-30 21:42:07,651 - app - INFO - Including auth routers
2025-03-30 21:42:07,670 - app - INFO - Including links router
2025-03-30 21:42:07,681 - app - INFO - Application initialized successfully
2025-03-30 21:42:07,682 - root - INFO - Starting background tasks
2025-03-30 21:42:07,683 - root - INFO - Starting expired links cleanup task
2025-03-30 21:42:07,683 - root - INFO - Starting expired links cleanup
2025-03-30 21:42:07,706 - root - INFO - No expired links found
2025-03-30 21:42:35,406 - root - INFO - Stopping background tasks
2025-03-30 21:42:35,407 - root - INFO - Cleanup task cancelled successfully
2025-03-30 21:42:36,300 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 21:42:36,321 - database - INFO - Database connection established successfully
2025-03-30 21:42:36,400 - app - INFO - Initializing FastAPI application
2025-03-30 21:42:36,401 - app - INFO - Including auth routers
2025-03-30 21:42:36,421 - app - INFO - Including links router
2025-03-30 21:42:36,431 - app - INFO - Application initialized successfully
2025-03-30 21:42:36,432 - root - INFO - Starting background tasks
2025-03-30 21:42:36,432 - root - INFO - Starting expired links cleanup task
2025-03-30 21:42:36,433 - root - INFO - Starting expired links cleanup
2025-03-30 21:42:36,452 - root - INFO - No expired links found
2025-03-30 21:42:43,627 - database - INFO - Created new database session
2025-03-30 21:42:43,639 - root - ERROR - Invalid expires_at format: date contains timezone information
2025-03-30 21:42:43,640 - database - ERROR - Error creating database session: 400: Дата истечения ссылки должна быть с точностью до минуты. Используйте формат YYYY-MM-DD HH:MM (например, 2024-03-25 15:30).
2025-03-30 21:43:05,571 - root - INFO - Stopping background tasks
2025-03-30 21:43:05,572 - root - INFO - Cleanup task cancelled successfully
2025-03-30 21:43:06,512 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 21:43:06,536 - database - INFO - Database connection established successfully
2025-03-30 21:43:06,615 - app - INFO - Initializing FastAPI application
2025-03-30 21:43:06,615 - app - INFO - Including auth routers
2025-03-30 21:43:06,636 - app - INFO - Including links router
2025-03-30 21:43:06,647 - app - INFO - Application initialized successfully
2025-03-30 21:43:06,648 - root - INFO - Starting background tasks
2025-03-30 21:43:06,648 - root - INFO - Starting expired links cleanup task
2025-03-30 21:43:06,649 - root - INFO - Starting expired links cleanup
2025-03-30 21:43:06,669 - root - INFO - No expired links found
2025-03-30 21:43:10,605 - database - INFO - Created new database session
2025-03-30 21:43:10,618 - root - ERROR - Invalid expires_at format: date contains timezone information
2025-03-30 21:43:10,619 - database - ERROR - Error creating database session: 400: Дата истечения ссылки должна быть с точностью до минуты. Используйте формат YYYY-MM-DD HH:MM (например, 2025-06-25 15:30).
2025-03-30 21:43:28,928 - database - INFO - Created new database session
2025-03-30 21:43:28,930 - root - INFO - Creating link with hard expire: expires_at=2025-03-30 23:40:00, is_soft_expire=False
2025-03-30 21:43:46,667 - database - INFO - Created new database session
2025-03-30 21:44:33,824 - database - INFO - Created new database session
2025-03-30 21:44:33,846 - root - INFO - Creating link with hard expire: expires_at=2025-03-30 21:50:00, is_soft_expire=False
2025-03-30 21:44:47,782 - database - INFO - Created new database session
2025-03-30 21:44:47,783 - root - INFO - Redirect called for short_code: rollroll
2025-03-30 21:44:47,783 - root - INFO - Cache: Getting link rollroll
2025-03-30 21:44:47,808 - root - INFO - Cache: Link rollroll not found
2025-03-30 21:44:47,809 - root - INFO - Cache: Getting stats for rollroll
2025-03-30 21:44:47,809 - root - INFO - Cache: Stats for rollroll not found
2025-03-30 21:44:47,810 - root - INFO - DB: is_soft_expire=False
2025-03-30 21:44:47,820 - root - INFO - Cache: Saving link rollroll with original_url=https://www.crunchyroll.com/ru/
2025-03-30 21:44:47,826 - root - INFO - Cache: Link rollroll saved successfully
2025-03-30 21:44:47,826 - root - INFO - Cache: Saving hard expire stats for rollroll: is_soft_expire=False
2025-03-30 21:44:47,828 - root - INFO - Redirecting to: https://www.crunchyroll.com/ru/
2025-03-30 21:44:51,848 - database - INFO - Created new database session
2025-03-30 21:44:51,849 - root - INFO - Redirect called for short_code: rollroll
2025-03-30 21:44:51,849 - root - INFO - Cache: Getting link rollroll
2025-03-30 21:44:51,851 - root - INFO - Cache: Link rollroll found
2025-03-30 21:44:51,851 - root - INFO - Cache: Getting stats for rollroll
2025-03-30 21:44:51,852 - root - INFO - Cache: Stats for rollroll found: is_soft_expire=False
2025-03-30 21:44:51,852 - root - INFO - Redirecting from cache
2025-03-30 21:44:51,852 - root - INFO - Cache: is_soft_expire=False
2025-03-30 21:44:51,852 - root - INFO - Cache: Saving hard expire stats for rollroll: is_soft_expire=False
2025-03-30 21:44:51,857 - root - INFO - DB: No expires_at update for rollroll: is_soft_expire=False
2025-03-30 21:44:55,096 - database - INFO - Created new database session
2025-03-30 21:44:55,096 - root - INFO - Redirect called for short_code: rollroll
2025-03-30 21:44:55,096 - root - INFO - Cache: Getting link rollroll
2025-03-30 21:44:55,097 - root - INFO - Cache: Link rollroll found
2025-03-30 21:44:55,097 - root - INFO - Cache: Getting stats for rollroll
2025-03-30 21:44:55,097 - root - INFO - Cache: Stats for rollroll found: is_soft_expire=False
2025-03-30 21:44:55,097 - root - INFO - Redirecting from cache
2025-03-30 21:44:55,098 - root - INFO - Cache: is_soft_expire=False
2025-03-30 21:44:55,098 - root - INFO - Cache: Saving hard expire stats for rollroll: is_soft_expire=False
2025-03-30 21:44:55,100 - root - INFO - DB: No expires_at update for rollroll: is_soft_expire=False
2025-03-30 21:45:26,884 - database - INFO - Created new database session
2025-03-30 21:45:26,899 - root - INFO - Cache: Getting stats for rollroll
2025-03-30 21:45:26,900 - root - INFO - Cache: Stats for rollroll found: is_soft_expire=False
2025-03-30 21:45:26,900 - root - INFO - Cache: Getting link rollroll
2025-03-30 21:45:26,900 - root - INFO - Cache: Link rollroll found
2025-03-30 21:45:35,312 - database - INFO - Created new database session
2025-03-30 21:45:35,327 - root - INFO - Getting all links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 21:45:35,330 - root - INFO - Found 9 links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 21:45:45,807 - database - INFO - Created new database session
2025-03-30 21:45:59,233 - database - INFO - Created new database session
2025-03-30 21:45:59,238 - root - INFO - Deleting link vyshka for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 21:45:59,242 - root - INFO - Cache: Deleting link vyshka
2025-03-30 21:45:59,243 - root - INFO - Cache: Link vyshka deleted successfully
2025-03-30 21:45:59,243 - root - INFO - Link vyshka deleted successfully
2025-03-30 21:46:34,512 - database - INFO - Created new database session
2025-03-30 21:46:34,515 - root - INFO - Cache: Getting stats for rollroll
2025-03-30 21:46:34,516 - root - INFO - Cache: Stats for rollroll found: is_soft_expire=False
2025-03-30 21:46:34,516 - root - INFO - Cache: Getting link rollroll
2025-03-30 21:46:34,516 - root - INFO - Cache: Link rollroll found
2025-03-30 21:47:01,996 - database - INFO - Created new database session
2025-03-30 21:47:02,012 - root - INFO - Updating short code for rollroll to rolll
2025-03-30 21:47:02,017 - root - INFO - Cache: Deleting link rollroll
2025-03-30 21:47:02,018 - root - INFO - Cache: Link rollroll deleted successfully
2025-03-30 21:47:02,018 - root - INFO - Short code updated successfully from rollroll to rolll
2025-03-30 21:47:09,271 - database - INFO - Created new database session
2025-03-30 21:47:09,273 - root - INFO - Cache: Getting stats for rollroll
2025-03-30 21:47:09,274 - root - INFO - Cache: Stats for rollroll not found
2025-03-30 21:47:09,274 - root - INFO - Cache: Getting link rollroll
2025-03-30 21:47:09,274 - root - INFO - Cache: Link rollroll not found
2025-03-30 21:47:09,276 - database - ERROR - Error creating database session: 404: Ссылка не найдена.
2025-03-30 21:47:11,697 - database - INFO - Created new database session
2025-03-30 21:47:11,700 - root - INFO - Cache: Getting stats for rolll
2025-03-30 21:47:11,701 - root - INFO - Cache: Stats for rolll not found
2025-03-30 21:47:11,701 - root - INFO - Cache: Getting link rolll
2025-03-30 21:47:11,702 - root - INFO - Cache: Link rolll not found
2025-03-30 21:47:11,704 - root - INFO - Stats: Getting stats for rolll: is_soft_expire=False, expires_at=2025-03-30 21:50:00
2025-03-30 21:47:11,704 - root - INFO - Cache: Saving link rolll with original_url=https://www.crunchyroll.com/ru/
2025-03-30 21:47:11,705 - root - INFO - Cache: Link rolll saved successfully
2025-03-30 21:47:11,705 - root - INFO - Cache: Saving hard expire stats for rolll: is_soft_expire=False
2025-03-30 21:47:19,985 - database - INFO - Created new database session
2025-03-30 21:47:19,985 - root - INFO - Redirect called for short_code: rolll
2025-03-30 21:47:19,986 - root - INFO - Cache: Getting link rolll
2025-03-30 21:47:19,988 - root - INFO - Cache: Link rolll found
2025-03-30 21:47:19,988 - root - INFO - Cache: Getting stats for rolll
2025-03-30 21:47:19,989 - root - INFO - Cache: Stats for rolll found: is_soft_expire=False
2025-03-30 21:47:19,989 - root - INFO - Redirecting from cache
2025-03-30 21:47:19,989 - root - INFO - Cache: is_soft_expire=False
2025-03-30 21:47:19,989 - root - INFO - Cache: Saving hard expire stats for rolll: is_soft_expire=False
2025-03-30 21:47:19,992 - root - INFO - DB: No expires_at update for rolll: is_soft_expire=False
2025-03-30 21:47:30,578 - database - INFO - Created new database session
2025-03-30 21:47:30,590 - root - INFO - Cache: Getting stats for rolll
2025-03-30 21:47:30,591 - root - INFO - Cache: Stats for rolll found: is_soft_expire=False
2025-03-30 21:47:30,591 - root - INFO - Cache: Getting link rolll
2025-03-30 21:47:30,594 - root - INFO - Cache: Link rolll found
2025-03-30 21:47:36,845 - database - INFO - Created new database session
2025-03-30 21:47:36,849 - root - INFO - Getting all links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 21:47:36,851 - root - INFO - Found 8 links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 21:47:49,864 - database - INFO - Created new database session
2025-03-30 21:47:49,867 - root - INFO - Deleting link cr for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 21:47:49,869 - root - INFO - Cache: Deleting link cr
2025-03-30 21:47:49,870 - root - INFO - Cache: Link cr deleted successfully
2025-03-30 21:47:49,871 - root - INFO - Link cr deleted successfully
2025-03-30 21:47:59,891 - database - INFO - Created new database session
2025-03-30 21:47:59,895 - root - INFO - Getting all links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 21:47:59,896 - root - INFO - Found 7 links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 21:48:29,368 - database - INFO - Created new database session
2025-03-30 21:48:29,372 - root - INFO - Searching for URL: https://www.crunchyroll.com/ru/ for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 21:48:29,376 - root - INFO - Found 4 links for URL: https://www.crunchyroll.com/ru/
2025-03-30 21:48:47,536 - database - INFO - Created new database session
2025-03-30 21:48:47,539 - root - INFO - Deleting link crcr for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 21:48:47,541 - root - INFO - Cache: Deleting link crcr
2025-03-30 21:48:47,542 - root - INFO - Cache: Link crcr deleted successfully
2025-03-30 21:48:47,542 - root - INFO - Link crcr deleted successfully
2025-03-30 21:48:55,990 - database - INFO - Created new database session
2025-03-30 21:48:55,992 - root - INFO - Searching for URL: https://www.hse.ru/ for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 21:48:55,994 - root - INFO - Found 3 links for URL: https://www.hse.ru/
2025-03-30 21:49:04,048 - database - INFO - Created new database session
2025-03-30 21:49:04,050 - root - INFO - Deleting link esh for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 21:49:04,053 - root - INFO - Cache: Deleting link esh
2025-03-30 21:49:04,054 - root - INFO - Cache: Link esh deleted successfully
2025-03-30 21:49:04,055 - root - INFO - Link esh deleted successfully
2025-03-30 21:49:36,355 - database - INFO - Created new database session
2025-03-30 21:49:36,359 - root - INFO - Creating link with hard expire: expires_at=2025-03-30 19:00:00, is_soft_expire=False
2025-03-30 21:49:44,123 - database - INFO - Created new database session
2025-03-30 21:49:44,126 - root - INFO - Getting all links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 21:49:44,128 - root - INFO - Found 6 links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 21:53:06,788 - root - INFO - Starting expired links cleanup
2025-03-30 21:53:06,792 - root - INFO - No expired links found
2025-03-30 22:00:22,713 - database - INFO - Created new database session
2025-03-30 22:00:29,037 - database - INFO - Created new database session
2025-03-30 22:00:29,040 - root - INFO - Getting all links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 22:00:29,042 - root - INFO - Found 6 links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 22:03:06,796 - root - INFO - Starting expired links cleanup
2025-03-30 22:03:06,799 - root - INFO - Found 1 expired links
2025-03-30 22:03:06,800 - root - INFO - Moving expired link hse_test to expired_links table for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 22:03:06,800 - root - INFO - Cache: Deleting link hse_test
2025-03-30 22:03:06,802 - root - INFO - Cache: Link hse_test deleted successfully
2025-03-30 22:03:06,808 - root - INFO - Successfully processed 1 expired links
2025-03-30 22:03:59,288 - database - INFO - Created new database session
2025-03-30 22:08:19,717 - root - INFO - Stopping background tasks
2025-03-30 22:08:19,718 - root - INFO - Cleanup task cancelled successfully
2025-03-30 22:08:21,050 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 22:08:21,086 - database - INFO - Database connection established successfully
2025-03-30 22:08:21,164 - app - INFO - Initializing FastAPI application
2025-03-30 22:08:21,165 - app - INFO - Including auth routers
2025-03-30 22:08:21,186 - app - INFO - Including links router
2025-03-30 22:08:21,197 - app - INFO - Application initialized successfully
2025-03-30 22:08:21,199 - root - INFO - Starting background tasks
2025-03-30 22:08:21,199 - root - INFO - Starting expired links cleanup task
2025-03-30 22:08:21,199 - root - INFO - Starting expired links cleanup
2025-03-30 22:08:21,236 - root - INFO - No expired links found
2025-03-30 22:09:13,457 - root - INFO - Stopping background tasks
2025-03-30 22:09:13,458 - root - INFO - Cleanup task cancelled successfully
2025-03-30 22:09:14,602 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 22:09:14,627 - database - INFO - Database connection established successfully
2025-03-30 22:09:14,703 - app - INFO - Initializing FastAPI application
2025-03-30 22:09:14,703 - app - INFO - Including auth routers
2025-03-30 22:09:14,727 - app - INFO - Including links router
2025-03-30 22:09:14,742 - app - INFO - Application initialized successfully
2025-03-30 22:09:14,743 - root - INFO - Starting background tasks
2025-03-30 22:09:14,743 - root - INFO - Starting expired links cleanup task
2025-03-30 22:09:14,744 - root - INFO - Starting expired links cleanup
2025-03-30 22:09:14,773 - root - INFO - No expired links found
2025-03-30 22:11:03,621 - root - INFO - Stopping background tasks
2025-03-30 22:11:03,621 - root - INFO - Cleanup task cancelled successfully
2025-03-30 22:11:04,802 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 22:11:04,829 - database - INFO - Database connection established successfully
2025-03-30 22:11:04,904 - app - INFO - Initializing FastAPI application
2025-03-30 22:11:04,905 - app - INFO - Including auth routers
2025-03-30 22:11:04,925 - app - INFO - Including links router
2025-03-30 22:11:04,937 - app - INFO - Application initialized successfully
2025-03-30 22:11:04,938 - root - INFO - Starting background tasks
2025-03-30 22:11:04,938 - root - INFO - Starting expired links cleanup task
2025-03-30 22:11:04,938 - root - INFO - Starting expired links cleanup
2025-03-30 22:11:04,962 - root - INFO - No expired links found
2025-03-30 22:11:26,981 - root - INFO - Stopping background tasks
2025-03-30 22:11:26,982 - root - INFO - Cleanup task cancelled successfully
2025-03-30 22:11:28,108 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 22:11:28,129 - database - INFO - Database connection established successfully
2025-03-30 22:11:28,198 - app - INFO - Initializing FastAPI application
2025-03-30 22:11:28,199 - app - INFO - Including auth routers
2025-03-30 22:11:28,219 - app - INFO - Including links router
2025-03-30 22:11:28,232 - app - INFO - Application initialized successfully
2025-03-30 22:11:28,233 - root - INFO - Starting background tasks
2025-03-30 22:11:28,233 - root - INFO - Starting expired links cleanup task
2025-03-30 22:11:28,233 - root - INFO - Starting expired links cleanup
2025-03-30 22:11:28,254 - root - INFO - No expired links found
2025-03-30 22:11:38,813 - root - INFO - Stopping background tasks
2025-03-30 22:11:38,813 - root - INFO - Cleanup task cancelled successfully
2025-03-30 22:11:39,974 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 22:11:40,001 - database - INFO - Database connection established successfully
2025-03-30 22:11:40,077 - app - INFO - Initializing FastAPI application
2025-03-30 22:11:40,077 - app - INFO - Including auth routers
2025-03-30 22:11:40,096 - app - INFO - Including links router
2025-03-30 22:11:40,108 - app - INFO - Application initialized successfully
2025-03-30 22:11:40,109 - root - INFO - Starting background tasks
2025-03-30 22:11:40,109 - root - INFO - Starting expired links cleanup task
2025-03-30 22:11:40,109 - root - INFO - Starting expired links cleanup
2025-03-30 22:11:40,133 - root - INFO - No expired links found
2025-03-30 22:11:42,741 - root - INFO - Stopping background tasks
2025-03-30 22:11:42,741 - root - INFO - Cleanup task cancelled successfully
2025-03-30 22:11:43,714 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 22:11:43,735 - database - INFO - Database connection established successfully
2025-03-30 22:11:43,805 - app - INFO - Initializing FastAPI application
2025-03-30 22:11:43,805 - app - INFO - Including auth routers
2025-03-30 22:11:43,824 - app - INFO - Including links router
2025-03-30 22:11:43,834 - app - INFO - Application initialized successfully
2025-03-30 22:11:43,835 - root - INFO - Starting background tasks
2025-03-30 22:11:43,836 - root - INFO - Starting expired links cleanup task
2025-03-30 22:11:43,836 - root - INFO - Starting expired links cleanup
2025-03-30 22:11:43,856 - root - INFO - No expired links found
2025-03-30 22:13:35,465 - root - INFO - Stopping background tasks
2025-03-30 22:13:35,465 - root - INFO - Cleanup task cancelled successfully
2025-03-30 22:13:36,633 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 22:13:36,659 - database - INFO - Database connection established successfully
2025-03-30 22:13:36,730 - app - INFO - Initializing FastAPI application
2025-03-30 22:13:36,731 - app - INFO - Including auth routers
2025-03-30 22:13:36,747 - app - INFO - Including links router
2025-03-30 22:13:36,758 - app - INFO - Application initialized successfully
2025-03-30 22:13:36,759 - root - INFO - Starting background tasks
2025-03-30 22:13:36,759 - root - INFO - Starting expired links cleanup task
2025-03-30 22:13:36,760 - root - INFO - Starting expired links cleanup
2025-03-30 22:13:36,795 - root - INFO - No expired links found
2025-03-30 22:16:02,469 - root - INFO - Stopping background tasks
2025-03-30 22:16:02,470 - root - INFO - Cleanup task cancelled successfully
2025-03-30 22:27:37,817 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 22:27:37,839 - database - INFO - Database connection established successfully
2025-03-30 22:46:11,756 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 22:46:11,792 - database - INFO - Database connection established successfully
2025-03-30 22:49:23,946 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 22:49:23,965 - database - INFO - Database connection established successfully
2025-03-30 22:50:27,774 - database - INFO - Connecting to database at localhost:5432/link_shortener_db
2025-03-30 22:50:27,793 - database - INFO - Database connection established successfully
2025-03-30 22:50:27,863 - app - INFO - Initializing FastAPI application
2025-03-30 22:50:27,863 - app - INFO - Including auth routers
2025-03-30 22:50:27,885 - app - INFO - Including links router
2025-03-30 22:50:27,895 - app - INFO - Application initialized successfully
2025-03-30 22:50:27,897 - root - INFO - Starting background tasks
2025-03-30 22:50:27,897 - root - INFO - Starting expired links cleanup task
2025-03-30 22:50:27,897 - root - INFO - Starting expired links cleanup
2025-03-30 22:50:27,920 - root - INFO - No expired links found
2025-03-30 22:50:41,825 - database - INFO - Created new database session
2025-03-30 22:50:50,897 - database - INFO - Created new database session
2025-03-30 22:50:58,160 - database - INFO - Created new database session
2025-03-30 22:50:58,162 - root - INFO - Getting all links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 22:50:58,166 - root - INFO - Found 5 links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 22:52:51,540 - database - INFO - Created new database session
2025-03-30 22:52:51,552 - root - INFO - Generating unique code
2025-03-30 22:52:51,556 - root - INFO - Generated unique code: ZYZM5A1O9P
2025-03-30 22:52:51,556 - root - INFO - Creating link with hard expire: expires_at=2025-03-30 20:00:00, is_soft_expire=False
2025-03-30 22:53:11,411 - database - INFO - Created new database session
2025-03-30 22:53:11,413 - root - INFO - Redirect called for short_code: ZYZM5A1O9P
2025-03-30 22:53:11,413 - root - INFO - Cache: Getting link ZYZM5A1O9P
2025-03-30 22:53:11,427 - root - INFO - Cache: Link ZYZM5A1O9P not found
2025-03-30 22:53:11,428 - root - INFO - Cache: Getting stats for ZYZM5A1O9P
2025-03-30 22:53:11,429 - root - INFO - Cache: Stats for ZYZM5A1O9P not found
2025-03-30 22:53:11,433 - root - INFO - DB: is_soft_expire=False
2025-03-30 22:53:11,437 - root - INFO - Cache: Saving link ZYZM5A1O9P with original_url=https://www.hse.ru/
2025-03-30 22:53:11,439 - root - INFO - Cache: Link ZYZM5A1O9P saved successfully
2025-03-30 22:53:11,439 - root - INFO - Cache: Saving hard expire stats for ZYZM5A1O9P: is_soft_expire=False
2025-03-30 22:53:11,441 - root - INFO - Redirecting to: https://www.hse.ru/
2025-03-30 22:53:20,035 - database - INFO - Created new database session
2025-03-30 22:53:20,039 - root - INFO - Getting all links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 22:53:20,041 - root - INFO - Found 6 links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 22:53:35,347 - database - INFO - Created new database session
2025-03-30 22:53:35,350 - root - INFO - Searching for URL: https://www.hse.ru/ for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 22:53:35,352 - root - INFO - Found 3 links for URL: https://www.hse.ru/
2025-03-30 22:53:47,605 - database - INFO - Created new database session
2025-03-30 22:53:47,618 - root - INFO - Cache: Getting stats for ZYZM5A1O9P
2025-03-30 22:53:47,621 - root - INFO - Cache: Stats for ZYZM5A1O9P found: is_soft_expire=False
2025-03-30 22:53:47,621 - root - INFO - Cache: Getting link ZYZM5A1O9P
2025-03-30 22:53:47,622 - root - INFO - Cache: Link ZYZM5A1O9P found
2025-03-30 22:53:59,084 - database - INFO - Created new database session
2025-03-30 22:53:59,088 - root - INFO - Getting all links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 22:53:59,091 - root - INFO - Found 6 links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 22:54:21,271 - database - INFO - Created new database session
2025-03-30 22:54:21,273 - database - ERROR - Error creating database session: 401: Unauthorized
2025-03-30 22:54:29,731 - database - INFO - Created new database session
2025-03-30 22:54:29,732 - root - INFO - Generating unique code
2025-03-30 22:54:29,733 - root - INFO - Generated unique code: KA9FLM1Z82
2025-03-30 22:54:29,734 - root - INFO - Creating link with hard expire: expires_at=2025-03-30 20:00:00, is_soft_expire=False
2025-03-30 22:54:41,848 - database - INFO - Created new database session
2025-03-30 22:54:41,849 - root - INFO - Redirect called for short_code: KA9FLM1Z82
2025-03-30 22:54:41,849 - root - INFO - Cache: Getting link KA9FLM1Z82
2025-03-30 22:54:41,851 - root - INFO - Cache: Link KA9FLM1Z82 not found
2025-03-30 22:54:41,851 - root - INFO - Cache: Getting stats for KA9FLM1Z82
2025-03-30 22:54:41,852 - root - INFO - Cache: Stats for KA9FLM1Z82 not found
2025-03-30 22:54:41,854 - root - INFO - DB: is_soft_expire=False
2025-03-30 22:54:41,857 - root - INFO - Cache: Saving link KA9FLM1Z82 with original_url=https://www.hse.ru/
2025-03-30 22:54:41,859 - root - INFO - Cache: Link KA9FLM1Z82 saved successfully
2025-03-30 22:54:41,859 - root - INFO - Cache: Saving hard expire stats for KA9FLM1Z82: is_soft_expire=False
2025-03-30 22:54:41,860 - root - INFO - Redirecting to: https://www.hse.ru/
2025-03-30 22:54:56,844 - database - INFO - Created new database session
2025-03-30 22:55:26,978 - database - INFO - Created new database session
2025-03-30 22:55:26,985 - root - ERROR - Invalid expires_at format: date contains timezone information
2025-03-30 22:55:26,986 - database - ERROR - Error creating database session: 400: Дата истечения ссылки должна быть с точностью до минуты. Используйте формат YYYY-MM-DD HH:MM (например, 2025-06-25 15:30).
2025-03-30 22:55:41,102 - database - INFO - Created new database session
2025-03-30 22:55:41,120 - root - INFO - Creating link with soft expire: expires_at=2025-04-13 19:55:41.120814, is_soft_expire=True
2025-03-30 22:55:57,842 - database - INFO - Created new database session
2025-03-30 22:55:57,843 - root - INFO - Redirect called for short_code: rollingroll
2025-03-30 22:55:57,843 - root - INFO - Cache: Getting link rollingroll
2025-03-30 22:55:57,844 - root - INFO - Cache: Link rollingroll not found
2025-03-30 22:55:57,844 - root - INFO - Cache: Getting stats for rollingroll
2025-03-30 22:55:57,845 - root - INFO - Cache: Stats for rollingroll not found
2025-03-30 22:55:57,847 - root - INFO - DB: is_soft_expire=True
2025-03-30 22:55:57,847 - root - INFO - DB: Updating expires_at from 2025-04-13 19:55:41.120814 to 2025-04-13 19:55:57.847483
2025-03-30 22:55:57,851 - root - INFO - Cache: Saving link rollingroll with original_url=https://www.crunchyroll.com/ru/
2025-03-30 22:55:57,855 - root - INFO - Cache: Link rollingroll saved successfully
2025-03-30 22:55:57,856 - root - INFO - Cache: Saving soft expire stats for rollingroll: expires_at=2025-04-13 19:55:57.847483, is_soft_expire=True
2025-03-30 22:55:57,861 - root - INFO - Redirecting to: https://www.crunchyroll.com/ru/
2025-03-30 22:56:01,626 - database - INFO - Created new database session
2025-03-30 22:56:01,626 - root - INFO - Redirect called for short_code: rollingroll
2025-03-30 22:56:01,627 - root - INFO - Cache: Getting link rollingroll
2025-03-30 22:56:01,628 - root - INFO - Cache: Link rollingroll found
2025-03-30 22:56:01,628 - root - INFO - Cache: Getting stats for rollingroll
2025-03-30 22:56:01,629 - root - INFO - Cache: Stats for rollingroll found: is_soft_expire=True
2025-03-30 22:56:01,629 - root - INFO - Redirecting from cache
2025-03-30 22:56:01,629 - root - INFO - Cache: is_soft_expire=True
2025-03-30 22:56:01,629 - root - INFO - Cache: Updating expires_at to 2025-04-13 19:56:01.629800
2025-03-30 22:56:01,630 - root - INFO - Cache: Saving soft expire stats for rollingroll: expires_at=2025-04-13 19:56:01.629800, is_soft_expire=True
2025-03-30 22:56:01,633 - root - INFO - DB: Updating soft expire for rollingroll: from 2025-04-13 19:55:57.847483 to 2025-04-13 19:56:01.629800
2025-03-30 22:56:06,772 - database - INFO - Created new database session
2025-03-30 22:56:06,773 - root - INFO - Redirect called for short_code: rollingroll
2025-03-30 22:56:06,773 - root - INFO - Cache: Getting link rollingroll
2025-03-30 22:56:06,774 - root - INFO - Cache: Link rollingroll found
2025-03-30 22:56:06,774 - root - INFO - Cache: Getting stats for rollingroll
2025-03-30 22:56:06,775 - root - INFO - Cache: Stats for rollingroll found: is_soft_expire=True
2025-03-30 22:56:06,776 - root - INFO - Redirecting from cache
2025-03-30 22:56:06,776 - root - INFO - Cache: is_soft_expire=True
2025-03-30 22:56:06,776 - root - INFO - Cache: Updating expires_at to 2025-04-13 19:56:06.776796
2025-03-30 22:56:06,777 - root - INFO - Cache: Saving soft expire stats for rollingroll: expires_at=2025-04-13 19:56:06.776796, is_soft_expire=True
2025-03-30 22:56:06,779 - root - INFO - DB: Updating soft expire for rollingroll: from 2025-04-13 19:56:01.629800 to 2025-04-13 19:56:06.776796
2025-03-30 22:56:23,480 - database - INFO - Created new database session
2025-03-30 22:56:23,484 - root - INFO - Cache: Getting stats for rollingroll
2025-03-30 22:56:23,486 - root - INFO - Cache: Stats for rollingroll found: is_soft_expire=True
2025-03-30 22:56:23,486 - root - INFO - Cache: Getting link rollingroll
2025-03-30 22:56:23,487 - root - INFO - Cache: Link rollingroll found
2025-03-30 22:56:37,010 - database - INFO - Created new database session
2025-03-30 22:56:37,024 - root - INFO - Getting all links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 22:56:37,028 - root - INFO - Found 7 links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 22:57:10,071 - database - INFO - Created new database session
2025-03-30 22:57:37,211 - database - INFO - Created new database session
2025-03-30 22:57:37,219 - root - INFO - Reactivating expired link 5 for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 22:57:37,221 - root - INFO - Using original short code: hse_test
2025-03-30 22:57:37,222 - root - INFO - Setting hard expire: expires_at=2025-03-30 20:30:00
2025-03-30 22:57:37,228 - root - INFO - Link hse_test reactivated successfully as hse_test
2025-03-30 22:57:51,702 - database - INFO - Created new database session
2025-03-30 22:57:51,702 - root - INFO - Redirect called for short_code: hse_test
2025-03-30 22:57:51,703 - root - INFO - Cache: Getting link hse_test
2025-03-30 22:57:51,706 - root - INFO - Cache: Link hse_test not found
2025-03-30 22:57:51,706 - root - INFO - Cache: Getting stats for hse_test
2025-03-30 22:57:51,707 - root - INFO - Cache: Stats for hse_test not found
2025-03-30 22:57:51,709 - root - INFO - DB: is_soft_expire=False
2025-03-30 22:57:51,712 - root - INFO - Cache: Saving link hse_test with original_url=https://www.hse.ru/
2025-03-30 22:57:51,714 - root - INFO - Cache: Link hse_test saved successfully
2025-03-30 22:57:51,714 - root - INFO - Cache: Saving hard expire stats for hse_test: is_soft_expire=False
2025-03-30 22:57:51,715 - root - INFO - Redirecting to: https://www.hse.ru/
2025-03-30 22:57:54,857 - database - INFO - Created new database session
2025-03-30 22:57:54,857 - root - INFO - Redirect called for short_code: hse_test
2025-03-30 22:57:54,858 - root - INFO - Cache: Getting link hse_test
2025-03-30 22:57:54,858 - root - INFO - Cache: Link hse_test found
2025-03-30 22:57:54,859 - root - INFO - Cache: Getting stats for hse_test
2025-03-30 22:57:54,860 - root - INFO - Cache: Stats for hse_test found: is_soft_expire=False
2025-03-30 22:57:54,861 - root - INFO - Redirecting from cache
2025-03-30 22:57:54,861 - root - INFO - Cache: is_soft_expire=False
2025-03-30 22:57:54,861 - root - INFO - Cache: Saving hard expire stats for hse_test: is_soft_expire=False
2025-03-30 22:57:54,866 - root - INFO - DB: No expires_at update for hse_test: is_soft_expire=False
2025-03-30 22:57:59,653 - database - INFO - Created new database session
2025-03-30 22:57:59,653 - root - INFO - Redirect called for short_code: hse_test
2025-03-30 22:57:59,654 - root - INFO - Cache: Getting link hse_test
2025-03-30 22:57:59,655 - root - INFO - Cache: Link hse_test found
2025-03-30 22:57:59,655 - root - INFO - Cache: Getting stats for hse_test
2025-03-30 22:57:59,655 - root - INFO - Cache: Stats for hse_test found: is_soft_expire=False
2025-03-30 22:57:59,656 - root - INFO - Redirecting from cache
2025-03-30 22:57:59,656 - root - INFO - Cache: is_soft_expire=False
2025-03-30 22:57:59,656 - root - INFO - Cache: Saving hard expire stats for hse_test: is_soft_expire=False
2025-03-30 22:57:59,658 - root - INFO - DB: No expires_at update for hse_test: is_soft_expire=False
2025-03-30 22:58:11,962 - database - INFO - Created new database session
2025-03-30 22:58:11,969 - root - INFO - Cache: Getting stats for hse_test
2025-03-30 22:58:11,982 - root - INFO - Cache: Stats for hse_test found: is_soft_expire=False
2025-03-30 22:58:11,982 - root - INFO - Cache: Getting link hse_test
2025-03-30 22:58:11,983 - root - INFO - Cache: Link hse_test found
2025-03-30 22:58:20,758 - database - INFO - Created new database session
2025-03-30 22:58:20,761 - root - INFO - Getting all links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 22:58:20,762 - root - INFO - Found 8 links for user 5bbf3a57-fe9f-452f-a951-27e094e125b1
2025-03-30 22:58:50,081 - root - INFO - Stopping background tasks
2025-03-30 22:58:50,082 - root - INFO - Cleanup task cancelled successfully
2025-03-30 21:54:41,189 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 21:54:41,213 - database - INFO - Database connection established successfully
2025-03-30 21:54:43,512 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 21:54:43,532 - database - INFO - Database connection established successfully
2025-03-30 21:54:43,591 - app - INFO - Initializing FastAPI application
2025-03-30 21:54:43,592 - app - INFO - Including auth routers
2025-03-30 21:54:43,619 - app - INFO - Including links router
2025-03-30 21:54:43,634 - app - INFO - Application initialized successfully
2025-03-30 21:54:43,636 - root - INFO - Starting background tasks
2025-03-30 21:54:43,637 - root - INFO - Starting expired links cleanup task
2025-03-30 21:54:43,638 - root - INFO - Starting expired links cleanup
2025-03-30 21:57:44,730 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 21:57:44,797 - database - INFO - Database connection established successfully
2025-03-30 21:57:44,838 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 21:57:44,860 - database - INFO - Database connection established successfully
2025-03-30 21:57:47,190 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 21:57:47,209 - database - INFO - Database connection established successfully
2025-03-30 21:57:47,264 - app - INFO - Initializing FastAPI application
2025-03-30 21:57:47,265 - app - INFO - Including auth routers
2025-03-30 21:57:47,289 - app - INFO - Including links router
2025-03-30 21:57:47,301 - app - INFO - Application initialized successfully
2025-03-30 21:57:47,303 - root - INFO - Starting background tasks
2025-03-30 21:57:47,304 - root - INFO - Starting expired links cleanup task
2025-03-30 21:57:47,304 - root - INFO - Starting expired links cleanup
2025-03-30 21:59:40,706 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 21:59:40,777 - database - INFO - Database connection established successfully
2025-03-30 21:59:40,806 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 21:59:40,828 - database - INFO - Database connection established successfully
2025-03-30 21:59:41,684 - root - INFO - Starting background tasks worker
2025-03-30 21:59:41,685 - root - INFO - Starting expired links cleanup task
2025-03-30 21:59:41,686 - root - INFO - Starting expired links cleanup
2025-03-30 21:59:43,183 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 21:59:43,202 - database - INFO - Database connection established successfully
2025-03-30 21:59:43,258 - app - INFO - Initializing FastAPI application
2025-03-30 21:59:43,259 - app - INFO - Including auth routers
2025-03-30 21:59:43,284 - app - INFO - Including links router
2025-03-30 21:59:43,298 - app - INFO - Application initialized successfully
2025-03-30 21:59:43,300 - root - INFO - Starting background tasks
2025-03-30 21:59:43,300 - root - INFO - Starting expired links cleanup task
2025-03-30 21:59:43,301 - root - INFO - Starting expired links cleanup
2025-03-30 22:01:10,701 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:01:10,767 - database - INFO - Database connection established successfully
2025-03-30 22:01:10,809 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:01:10,830 - database - INFO - Database connection established successfully
2025-03-30 22:01:11,668 - root - INFO - Starting background tasks worker
2025-03-30 22:01:11,668 - root - INFO - Starting expired links cleanup task
2025-03-30 22:01:11,669 - root - INFO - Starting expired links cleanup
2025-03-30 22:01:11,740 - root - INFO - No expired links found
2025-03-30 22:01:13,600 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:01:13,618 - database - INFO - Database connection established successfully
2025-03-30 22:01:13,673 - app - INFO - Initializing FastAPI application
2025-03-30 22:01:13,674 - app - INFO - Including auth routers
2025-03-30 22:01:13,697 - app - INFO - Including links router
2025-03-30 22:01:13,710 - app - INFO - Application initialized successfully
2025-03-30 22:01:13,711 - root - INFO - Starting background tasks
2025-03-30 22:01:13,712 - root - INFO - Starting expired links cleanup task
2025-03-30 22:01:13,713 - root - INFO - Starting expired links cleanup
2025-03-30 22:01:13,775 - root - INFO - No expired links found
2025-03-30 22:04:20,754 - database - INFO - Created new database session
2025-03-30 22:04:20,776 - root - ERROR - Invalid expires_at format: date contains timezone information
2025-03-30 22:04:20,778 - database - ERROR - Error creating database session: 
2025-03-30 22:04:30,930 - database - INFO - Created new database session
2025-03-30 22:04:30,935 - root - INFO - Creating link with hard expire: expires_at=2025-03-30 23:00:00, is_soft_expire=False
2025-03-30 22:04:43,589 - database - INFO - Created new database session
2025-03-30 22:04:43,596 - database - ERROR - Error creating database session: 
2025-03-30 22:05:02,598 - database - INFO - Created new database session
2025-03-30 22:05:02,598 - root - INFO - Redirect called for short_code: hse
2025-03-30 22:05:02,608 - database - ERROR - Error creating database session: Error connecting to localhost:6379. Multiple exceptions: [Errno 111] Connect call failed ('::1', 6379, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 6379).
2025-03-30 22:09:24,496 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:09:24,559 - database - INFO - Database connection established successfully
2025-03-30 22:09:24,616 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:09:24,637 - database - INFO - Database connection established successfully
2025-03-30 22:09:25,632 - root - INFO - Starting background tasks worker
2025-03-30 22:09:25,632 - root - INFO - Starting expired links cleanup task
2025-03-30 22:09:25,633 - root - INFO - Starting expired links cleanup
2025-03-30 22:09:25,710 - root - INFO - No expired links found
2025-03-30 22:09:27,071 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:09:27,094 - database - INFO - Database connection established successfully
2025-03-30 22:09:27,149 - app - INFO - Initializing FastAPI application
2025-03-30 22:09:27,150 - app - INFO - Including auth routers
2025-03-30 22:09:27,173 - app - INFO - Including links router
2025-03-30 22:09:27,189 - app - INFO - Application initialized successfully
2025-03-30 22:09:27,190 - root - INFO - Starting background tasks
2025-03-30 22:09:27,191 - root - INFO - Starting expired links cleanup task
2025-03-30 22:09:27,191 - root - INFO - Starting expired links cleanup
2025-03-30 22:09:27,255 - root - INFO - No expired links found
2025-03-30 22:09:52,937 - database - INFO - Created new database session
2025-03-30 22:09:52,951 - database - ERROR - Error creating database session: 
2025-03-30 22:10:00,097 - database - INFO - Created new database session
2025-03-30 22:10:00,103 - root - INFO - Creating link with hard expire: expires_at=2025-03-30 23:00:00, is_soft_expire=False
2025-03-30 22:10:11,449 - database - INFO - Created new database session
2025-03-30 22:10:11,451 - root - INFO - Redirect called for short_code: hse_test
2025-03-30 22:10:11,473 - root - INFO - Redirecting to: https://www.hse.ru/
2025-03-30 22:10:18,049 - database - INFO - Created new database session
2025-03-30 22:10:18,055 - root - INFO - Redirect called for short_code: hse_test
2025-03-30 22:10:18,059 - root - INFO - Redirecting from cache
2025-03-30 22:10:31,700 - database - INFO - Created new database session
2025-03-30 22:10:31,710 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/fastapi_users/manager.py", line 645, in authenticate
    user = await self.get_by_email(credentials.username)
  File "/usr/local/lib/python3.10/site-packages/fastapi_users/manager.py", line 90, in get_by_email
    raise exceptions.UserNotExists()
fastapi_users.exceptions.UserNotExists

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-30 22:10:31,983 - database - ERROR - Error creating database session: 
2025-03-30 22:11:19,519 - database - INFO - Created new database session
2025-03-30 22:11:19,768 - database - ERROR - Error creating database session: 
2025-03-30 22:13:18,856 - database - INFO - Created new database session
2025-03-30 22:13:19,124 - auth - INFO - User b19a29e8-9c67-42da-a3ac-3077ffeff9b9 has registered
2025-03-30 22:13:19,124 - database - ERROR - Error creating database session: You must set the config attribute `from_attributes=True` to use from_orm
2025-03-30 22:15:39,673 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:15:39,741 - database - INFO - Database connection established successfully
2025-03-30 22:15:39,815 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:15:39,838 - database - INFO - Database connection established successfully
2025-03-30 22:15:40,703 - root - INFO - Starting background tasks worker
2025-03-30 22:15:40,703 - root - INFO - Starting expired links cleanup task
2025-03-30 22:15:40,704 - root - INFO - Starting expired links cleanup
2025-03-30 22:15:40,778 - root - INFO - No expired links found
2025-03-30 22:15:42,151 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:15:42,172 - database - INFO - Database connection established successfully
2025-03-30 22:15:42,237 - app - INFO - Initializing FastAPI application
2025-03-30 22:15:42,238 - app - INFO - Including auth routers
2025-03-30 22:15:42,263 - app - INFO - Including links router
2025-03-30 22:15:42,277 - app - INFO - Application initialized successfully
2025-03-30 22:15:42,278 - root - INFO - Starting background tasks
2025-03-30 22:15:42,279 - root - INFO - Starting expired links cleanup task
2025-03-30 22:15:42,280 - root - INFO - Starting expired links cleanup
2025-03-30 22:15:42,340 - root - INFO - No expired links found
2025-03-30 22:16:05,893 - database - INFO - Created new database session
2025-03-30 22:16:05,912 - database - ERROR - Error creating database session: 
2025-03-30 22:16:21,163 - database - INFO - Created new database session
2025-03-30 22:16:21,168 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-30 22:16:30,899 - database - INFO - Created new database session
2025-03-30 22:16:30,911 - database - ERROR - Error creating database session: 
2025-03-30 22:16:51,129 - database - INFO - Created new database session
2025-03-30 22:16:51,142 - root - ERROR - Invalid expires_at format: date contains timezone information
2025-03-30 22:16:51,143 - database - ERROR - Error creating database session: 
2025-03-30 22:17:08,840 - database - INFO - Created new database session
2025-03-30 22:17:08,847 - root - INFO - Creating link with hard expire: expires_at=2025-03-31 22:30:00, is_soft_expire=False
2025-03-30 22:17:22,241 - database - INFO - Created new database session
2025-03-30 22:17:22,242 - root - INFO - Redirect called for short_code: roll
2025-03-30 22:17:22,264 - root - INFO - Redirecting to: https://www.crunchyroll.com/ru/
2025-03-30 22:17:26,546 - database - INFO - Created new database session
2025-03-30 22:17:26,549 - root - INFO - Redirect called for short_code: roll
2025-03-30 22:17:26,554 - root - INFO - Redirecting from cache
2025-03-30 22:17:29,726 - database - INFO - Created new database session
2025-03-30 22:17:29,727 - root - INFO - Redirect called for short_code: roll
2025-03-30 22:17:29,730 - root - INFO - Redirecting from cache
2025-03-30 22:17:32,637 - database - INFO - Created new database session
2025-03-30 22:17:32,647 - root - INFO - Redirect called for short_code: roll
2025-03-30 22:17:32,659 - root - INFO - Redirecting from cache
2025-03-30 22:17:54,928 - database - INFO - Created new database session
2025-03-30 22:18:05,187 - database - INFO - Created new database session
2025-03-30 22:19:21,393 - database - INFO - Created new database session
2025-03-30 22:19:27,959 - database - INFO - Created new database session
2025-03-30 22:19:27,974 - database - ERROR - Error creating database session: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column expired_links.is_soft_expire does not exist
[SQL: SELECT expired_links.id, expired_links.user_id, expired_links.original_url, expired_links.short_code, expired_links.created_at, expired_links.expires_at, expired_links.last_click_at, expired_links.clicks, expired_links.is_soft_expire 
FROM expired_links 
WHERE expired_links.user_id = $1::UUID]
[parameters: ('b19a29e8-9c67-42da-a3ac-3077ffeff9b9',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-30 22:21:29,035 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:21:29,113 - database - INFO - Database connection established successfully
2025-03-30 22:21:29,149 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:21:29,171 - database - INFO - Database connection established successfully
2025-03-30 22:21:30,130 - root - INFO - Starting background tasks worker
2025-03-30 22:21:30,131 - root - INFO - Starting expired links cleanup task
2025-03-30 22:21:30,132 - root - INFO - Starting expired links cleanup
2025-03-30 22:21:31,723 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:21:31,740 - database - INFO - Database connection established successfully
2025-03-30 22:21:31,799 - app - INFO - Initializing FastAPI application
2025-03-30 22:21:31,799 - app - INFO - Including auth routers
2025-03-30 22:21:31,825 - app - INFO - Including links router
2025-03-30 22:21:31,838 - app - INFO - Application initialized successfully
2025-03-30 22:21:31,840 - root - INFO - Starting background tasks
2025-03-30 22:21:31,841 - root - INFO - Starting expired links cleanup task
2025-03-30 22:21:31,842 - root - INFO - Starting expired links cleanup
2025-03-30 22:21:31,904 - root - INFO - No expired links found
2025-03-30 22:21:41,512 - database - INFO - Created new database session
2025-03-30 22:21:41,525 - database - ERROR - Error creating database session: 
2025-03-30 22:21:50,198 - database - INFO - Created new database session
2025-03-30 22:21:50,206 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/fastapi_users/manager.py", line 645, in authenticate
    user = await self.get_by_email(credentials.username)
  File "/usr/local/lib/python3.10/site-packages/fastapi_users/manager.py", line 90, in get_by_email
    raise exceptions.UserNotExists()
fastapi_users.exceptions.UserNotExists

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-30 22:21:50,476 - database - ERROR - Error creating database session: 
2025-03-30 22:22:54,959 - database - INFO - Created new database session
2025-03-30 22:22:55,227 - auth - INFO - User c6b3f274-f1f6-4905-91ec-69f92266a3e4 has registered
2025-03-30 22:23:15,514 - database - INFO - Created new database session
2025-03-30 22:23:25,246 - database - INFO - Created new database session
2025-03-30 22:23:25,255 - database - ERROR - Error creating database session: 
2025-03-30 22:24:19,426 - database - INFO - Created new database session
2025-03-30 22:24:19,434 - root - INFO - Creating link with hard expire: expires_at=2025-03-30 22:30:00, is_soft_expire=False
2025-03-30 22:24:33,767 - database - INFO - Created new database session
2025-03-30 22:24:40,587 - database - INFO - Created new database session
2025-03-30 22:24:40,588 - root - INFO - Redirect called for short_code: roll
2025-03-30 22:24:40,593 - root - INFO - Redirecting from cache
2025-03-30 22:24:45,088 - database - INFO - Created new database session
2025-03-30 22:24:45,089 - root - INFO - Redirect called for short_code: roll
2025-03-30 22:24:45,093 - root - INFO - Redirecting from cache
2025-03-30 22:24:48,592 - database - INFO - Created new database session
2025-03-30 22:24:48,593 - root - INFO - Redirect called for short_code: roll
2025-03-30 22:24:48,598 - root - INFO - Redirecting from cache
2025-03-30 22:24:58,803 - database - INFO - Created new database session
2025-03-30 22:25:02,644 - database - INFO - Created new database session
2025-03-30 22:25:25,243 - database - INFO - Created new database session
2025-03-30 22:25:25,248 - root - INFO - Creating link with soft expire: expires_at=2025-04-13 22:25:25.248722, is_soft_expire=True
2025-03-30 22:25:38,505 - database - INFO - Created new database session
2025-03-30 22:25:38,510 - root - INFO - Searching for original URL: https://www.crunchyroll.com/ru/
2025-03-30 22:25:47,767 - database - INFO - Created new database session
2025-03-30 22:25:54,903 - database - INFO - Created new database session
2025-03-30 22:26:02,888 - database - INFO - Created new database session
2025-03-30 22:27:26,710 - database - INFO - Created new database session
2025-03-30 22:30:31,350 - database - INFO - Created new database session
2025-03-30 22:31:31,973 - root - INFO - Starting expired links cleanup
2025-03-30 22:31:31,980 - root - INFO - No expired links found
2025-03-30 22:37:44,453 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:37:44,526 - database - INFO - Database connection established successfully
2025-03-30 22:37:44,576 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:37:44,600 - database - INFO - Database connection established successfully
2025-03-30 22:37:45,420 - root - INFO - Starting background tasks worker
2025-03-30 22:37:45,421 - root - INFO - Starting expired links cleanup task
2025-03-30 22:37:45,422 - root - INFO - Starting expired links cleanup
2025-03-30 22:37:45,495 - root - INFO - No expired links found
2025-03-30 22:37:46,928 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:37:46,946 - database - INFO - Database connection established successfully
2025-03-30 22:37:47,000 - app - INFO - Initializing FastAPI application
2025-03-30 22:37:47,001 - app - INFO - Including auth routers
2025-03-30 22:37:47,024 - app - INFO - Including links router
2025-03-30 22:37:47,039 - app - INFO - Application initialized successfully
2025-03-30 22:37:47,041 - root - INFO - Starting background tasks
2025-03-30 22:37:47,041 - root - INFO - Starting expired links cleanup task
2025-03-30 22:37:47,042 - root - INFO - Starting expired links cleanup
2025-03-30 22:37:47,104 - root - INFO - No expired links found
2025-03-30 22:38:12,997 - database - INFO - Created new database session
2025-03-30 22:38:13,013 - app.links.router - INFO - Creating new link for user anonymous
2025-03-30 22:38:13,019 - root - INFO - Creating link with soft expire: expires_at=2025-04-13 22:38:13.019534, is_soft_expire=True
2025-03-30 22:38:23,994 - database - INFO - Created new database session
2025-03-30 22:38:23,997 - app.links.router - INFO - Redirecting to link with short code: hse
2025-03-30 22:38:23,998 - app.links.service - INFO - Redirect called for short_code: hse
2025-03-30 22:38:24,000 - app.links.service - INFO - Getting link hse from cache
2025-03-30 22:38:24,010 - app.links.service - INFO - Link hse not found in cache
2025-03-30 22:38:24,011 - app.links.service - INFO - Getting stats for link hse from cache
2025-03-30 22:38:24,014 - app.links.service - INFO - Stats for link hse not found in cache
2025-03-30 22:38:24,024 - app.links.service - INFO - Saving link hse to cache
2025-03-30 22:38:24,026 - app.links.service - INFO - Link hse saved to cache successfully
2025-03-30 22:38:24,028 - app.links.service - INFO - Redirecting to: https://www.hse.ru/
2025-03-30 22:38:28,475 - database - INFO - Created new database session
2025-03-30 22:38:28,476 - app.links.router - INFO - Redirecting to link with short code: hse
2025-03-30 22:38:28,477 - app.links.service - INFO - Redirect called for short_code: hse
2025-03-30 22:38:28,479 - app.links.service - INFO - Getting link hse from cache
2025-03-30 22:38:28,482 - app.links.service - INFO - Link hse found in cache
2025-03-30 22:38:28,483 - app.links.service - INFO - Getting stats for link hse from cache
2025-03-30 22:38:28,486 - app.links.service - INFO - Stats for link hse found in cache
2025-03-30 22:38:28,488 - app.links.service - INFO - Redirecting from cache
2025-03-30 22:38:52,148 - database - INFO - Created new database session
2025-03-30 22:38:52,163 - database - ERROR - Error creating database session: 
2025-03-30 22:39:05,281 - database - INFO - Created new database session
2025-03-30 22:39:05,285 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-30 22:39:16,841 - database - INFO - Created new database session
2025-03-30 22:39:16,846 - app.links.router - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 22:39:24,523 - database - INFO - Created new database session
2025-03-30 22:39:24,527 - app.links.router - INFO - Getting expired links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 22:39:24,532 - database - ERROR - Error creating database session: 
2025-03-30 22:42:30,484 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:42:30,546 - database - INFO - Database connection established successfully
2025-03-30 22:42:30,588 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:42:30,609 - database - INFO - Database connection established successfully
2025-03-30 22:42:31,448 - root - INFO - Starting background tasks worker
2025-03-30 22:42:31,448 - root - INFO - Starting expired links cleanup task
2025-03-30 22:42:31,449 - root - INFO - Starting expired links cleanup
2025-03-30 22:42:31,523 - root - INFO - No expired links found
2025-03-30 22:42:32,864 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:42:32,882 - database - INFO - Database connection established successfully
2025-03-30 22:42:32,936 - app - INFO - Initializing FastAPI application
2025-03-30 22:42:32,937 - app - INFO - Including auth routers
2025-03-30 22:42:32,961 - app - INFO - Including links router
2025-03-30 22:42:32,975 - app - INFO - Application initialized successfully
2025-03-30 22:42:32,976 - root - INFO - Starting background tasks
2025-03-30 22:42:32,977 - root - INFO - Starting expired links cleanup task
2025-03-30 22:42:32,978 - root - INFO - Starting expired links cleanup
2025-03-30 22:42:33,048 - root - INFO - No expired links found
2025-03-30 22:42:42,020 - database - INFO - Created new database session
2025-03-30 22:42:42,036 - app.links.router - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 22:42:44,078 - database - INFO - Created new database session
2025-03-30 22:42:44,084 - app.links.router - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 22:42:50,116 - database - INFO - Created new database session
2025-03-30 22:42:50,121 - app.links.router - INFO - Downloading links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 22:42:56,663 - database - INFO - Created new database session
2025-03-30 22:42:56,667 - database - ERROR - Error creating database session: 
2025-03-30 22:43:04,918 - database - INFO - Created new database session
2025-03-30 22:43:04,924 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-30 22:43:10,435 - database - INFO - Created new database session
2025-03-30 22:43:10,439 - app.links.router - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 22:43:13,436 - database - INFO - Created new database session
2025-03-30 22:43:13,443 - app.links.router - INFO - Downloading links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 22:47:59,788 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:47:59,848 - database - INFO - Database connection established successfully
2025-03-30 22:47:59,886 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:47:59,910 - database - INFO - Database connection established successfully
2025-03-30 22:48:00,777 - root - INFO - Starting background tasks worker
2025-03-30 22:48:00,778 - root - INFO - Starting expired links cleanup task
2025-03-30 22:48:00,778 - root - INFO - Starting expired links cleanup
2025-03-30 22:48:00,853 - root - INFO - No expired links found
2025-03-30 22:48:02,184 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:48:02,201 - database - INFO - Database connection established successfully
2025-03-30 22:48:02,256 - app - INFO - Initializing FastAPI application
2025-03-30 22:48:02,257 - app - INFO - Including auth routers
2025-03-30 22:48:02,281 - app - INFO - Including links router
2025-03-30 22:48:02,296 - app - INFO - Application initialized successfully
2025-03-30 22:48:02,297 - root - INFO - Starting background tasks
2025-03-30 22:48:02,298 - root - INFO - Starting expired links cleanup task
2025-03-30 22:48:02,299 - root - INFO - Starting expired links cleanup
2025-03-30 22:48:02,359 - root - INFO - No expired links found
2025-03-30 22:48:16,679 - database - INFO - Created new database session
2025-03-30 22:48:16,691 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-30 22:48:21,720 - database - INFO - Created new database session
2025-03-30 22:48:21,729 - app.links.router - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 22:48:26,291 - database - INFO - Created new database session
2025-03-30 22:48:26,295 - app.links.router - INFO - Downloading links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 22:55:28,793 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:55:28,867 - database - INFO - Database connection established successfully
2025-03-30 22:55:28,910 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:55:28,932 - database - INFO - Database connection established successfully
2025-03-30 22:55:29,914 - root - INFO - Starting background tasks worker
2025-03-30 22:55:29,914 - root - INFO - Starting expired links cleanup task
2025-03-30 22:55:29,915 - root - INFO - Starting expired links cleanup
2025-03-30 22:55:29,998 - root - INFO - No expired links found
2025-03-30 22:55:31,414 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 22:55:31,432 - database - INFO - Database connection established successfully
2025-03-30 22:55:31,486 - app - INFO - Initializing FastAPI application
2025-03-30 22:55:31,487 - app - INFO - Including auth routers
2025-03-30 22:55:31,510 - app - INFO - Including links router
2025-03-30 22:55:31,524 - app - INFO - Application initialized successfully
2025-03-30 22:55:31,525 - root - INFO - Starting background tasks
2025-03-30 22:55:31,526 - root - INFO - Starting expired links cleanup task
2025-03-30 22:55:31,527 - root - INFO - Starting expired links cleanup
2025-03-30 22:55:31,590 - root - INFO - No expired links found
2025-03-30 22:55:42,918 - database - INFO - Created new database session
2025-03-30 22:55:42,933 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-30 22:55:49,438 - database - INFO - Created new database session
2025-03-30 22:55:49,446 - app.links.router - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 22:55:56,187 - database - INFO - Created new database session
2025-03-30 22:55:56,191 - app.links.router - INFO - Downloading links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:02:44,722 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 23:02:44,788 - database - INFO - Database connection established successfully
2025-03-30 23:02:44,827 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 23:02:44,849 - database - INFO - Database connection established successfully
2025-03-30 23:02:45,689 - root - INFO - Starting background tasks worker
2025-03-30 23:02:45,690 - root - INFO - Starting expired links cleanup task
2025-03-30 23:02:45,691 - root - INFO - Starting expired links cleanup
2025-03-30 23:02:45,764 - root - INFO - No expired links found
2025-03-30 23:02:47,133 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 23:02:47,150 - database - INFO - Database connection established successfully
2025-03-30 23:02:47,204 - app - INFO - Initializing FastAPI application
2025-03-30 23:02:47,205 - app - INFO - Including auth routers
2025-03-30 23:02:47,229 - app - INFO - Including links router
2025-03-30 23:02:47,241 - app - INFO - Application initialized successfully
2025-03-30 23:02:47,243 - root - INFO - Starting background tasks
2025-03-30 23:02:47,244 - root - INFO - Starting expired links cleanup task
2025-03-30 23:02:47,245 - root - INFO - Starting expired links cleanup
2025-03-30 23:02:47,307 - root - INFO - No expired links found
2025-03-30 23:03:05,277 - database - INFO - Created new database session
2025-03-30 23:03:05,287 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-30 23:03:10,785 - database - INFO - Created new database session
2025-03-30 23:03:10,792 - app.links.router - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:03:14,106 - database - INFO - Created new database session
2025-03-30 23:03:14,111 - app.links.router - INFO - Downloading links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:03:21,238 - database - INFO - Created new database session
2025-03-30 23:03:21,243 - app.links.router - INFO - Getting expired links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:03:21,249 - database - ERROR - Error creating database session: 
2025-03-30 23:04:08,076 - database - INFO - Created new database session
2025-03-30 23:04:08,088 - app.links.router - INFO - Creating new link for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:04:08,097 - database - ERROR - Error creating database session: 
2025-03-30 23:04:12,975 - database - INFO - Created new database session
2025-03-30 23:04:12,982 - app.links.router - INFO - Creating new link for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:04:12,985 - root - INFO - Creating link with hard expire: expires_at=2025-03-30 23:07:00, is_soft_expire=False
2025-03-30 23:04:26,495 - database - INFO - Created new database session
2025-03-30 23:04:26,496 - app.links.router - INFO - Redirecting to link with short code: hse_test
2025-03-30 23:04:26,497 - app.links.service - INFO - Redirect called for short_code: hse_test
2025-03-30 23:04:26,498 - app.links.service - INFO - Getting link hse_test from cache
2025-03-30 23:04:26,506 - app.links.service - INFO - Link hse_test not found in cache
2025-03-30 23:04:26,507 - app.links.service - INFO - Getting stats for link hse_test from cache
2025-03-30 23:04:26,509 - app.links.service - INFO - Stats for link hse_test not found in cache
2025-03-30 23:04:26,524 - app.links.service - INFO - Saving link hse_test to cache
2025-03-30 23:04:26,527 - app.links.service - INFO - Link hse_test saved to cache successfully
2025-03-30 23:04:26,531 - app.links.service - INFO - Redirecting to: https://www.hse.ru/
2025-03-30 23:04:31,779 - database - INFO - Created new database session
2025-03-30 23:04:31,780 - app.links.router - INFO - Redirecting to link with short code: hse_test
2025-03-30 23:04:31,783 - app.links.service - INFO - Redirect called for short_code: hse_test
2025-03-30 23:04:31,785 - app.links.service - INFO - Getting link hse_test from cache
2025-03-30 23:04:31,790 - app.links.service - INFO - Link hse_test found in cache
2025-03-30 23:04:31,791 - app.links.service - INFO - Getting stats for link hse_test from cache
2025-03-30 23:04:31,793 - app.links.service - INFO - Stats for link hse_test found in cache
2025-03-30 23:04:31,795 - app.links.service - INFO - Redirecting from cache
2025-03-30 23:04:37,353 - database - INFO - Created new database session
2025-03-30 23:04:37,356 - app.links.router - INFO - Redirecting to link with short code: hse_test
2025-03-30 23:04:37,358 - app.links.service - INFO - Redirect called for short_code: hse_test
2025-03-30 23:04:37,361 - app.links.service - INFO - Getting link hse_test from cache
2025-03-30 23:04:37,366 - app.links.service - INFO - Link hse_test found in cache
2025-03-30 23:04:37,368 - app.links.service - INFO - Getting stats for link hse_test from cache
2025-03-30 23:04:37,369 - app.links.service - INFO - Stats for link hse_test found in cache
2025-03-30 23:04:37,372 - app.links.service - INFO - Redirecting from cache
2025-03-30 23:04:47,081 - database - INFO - Created new database session
2025-03-30 23:04:47,081 - app.links.router - INFO - Redirecting to link with short code: roll
2025-03-30 23:04:47,082 - app.links.service - INFO - Redirect called for short_code: roll
2025-03-30 23:04:47,083 - app.links.service - INFO - Getting link roll from cache
2025-03-30 23:04:47,087 - app.links.service - INFO - Link roll found in cache
2025-03-30 23:04:47,088 - app.links.service - INFO - Getting stats for link roll from cache
2025-03-30 23:04:47,090 - app.links.service - INFO - Stats for link roll found in cache
2025-03-30 23:04:47,091 - app.links.service - INFO - Redirecting from cache
2025-03-30 23:05:01,259 - database - INFO - Created new database session
2025-03-30 23:05:01,265 - app.links.router - INFO - Getting stats for link hse_test by user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:05:01,266 - app.links.service - INFO - Getting stats for link hse_test from cache
2025-03-30 23:05:01,267 - app.links.service - INFO - Stats for link hse_test found in cache
2025-03-30 23:05:01,269 - app.links.service - INFO - Getting link hse_test from cache
2025-03-30 23:05:01,271 - app.links.service - INFO - Link hse_test found in cache
2025-03-30 23:05:05,259 - database - INFO - Created new database session
2025-03-30 23:05:05,278 - app.links.router - INFO - Getting stats for link roll by user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:05:05,279 - app.links.service - INFO - Getting stats for link roll from cache
2025-03-30 23:05:05,280 - app.links.service - INFO - Stats for link roll found in cache
2025-03-30 23:05:05,281 - app.links.service - INFO - Getting link roll from cache
2025-03-30 23:05:05,283 - app.links.service - INFO - Link roll found in cache
2025-03-30 23:05:10,847 - database - INFO - Created new database session
2025-03-30 23:05:10,853 - app.links.router - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:05:26,339 - database - INFO - Created new database session
2025-03-30 23:05:26,345 - app.links.router - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:12:45,844 - root - INFO - Starting expired links cleanup
2025-03-30 23:12:45,865 - root - INFO - No expired links found
2025-03-30 23:12:47,306 - root - INFO - Starting expired links cleanup
2025-03-30 23:12:47,312 - root - INFO - No expired links found
2025-03-30 23:22:45,915 - root - INFO - Starting expired links cleanup
2025-03-30 23:22:45,931 - root - INFO - No expired links found
2025-03-30 23:22:47,307 - root - INFO - Starting expired links cleanup
2025-03-30 23:22:47,316 - root - INFO - No expired links found
2025-03-30 23:32:45,975 - root - INFO - Starting expired links cleanup
2025-03-30 23:32:45,979 - root - INFO - No expired links found
2025-03-30 23:32:57,947 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 23:32:58,015 - database - INFO - Database connection established successfully
2025-03-30 23:32:58,042 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 23:32:58,065 - database - INFO - Database connection established successfully
2025-03-30 23:32:58,918 - root - INFO - Starting background tasks worker
2025-03-30 23:32:58,919 - root - INFO - Starting expired links cleanup task
2025-03-30 23:32:58,919 - root - INFO - Starting expired links cleanup
2025-03-30 23:32:58,991 - root - INFO - No expired links found
2025-03-30 23:33:00,316 - database - INFO - Connecting to database at db:5432/link_shortener_db
2025-03-30 23:33:00,334 - database - INFO - Database connection established successfully
2025-03-30 23:33:00,392 - app - INFO - Initializing FastAPI application
2025-03-30 23:33:00,392 - app - INFO - Including auth routers
2025-03-30 23:33:00,418 - app - INFO - Including links router
2025-03-30 23:33:00,432 - app - INFO - Application initialized successfully
2025-03-30 23:33:00,433 - root - INFO - Starting background tasks
2025-03-30 23:33:00,434 - root - INFO - Starting expired links cleanup task
2025-03-30 23:33:00,435 - root - INFO - Starting expired links cleanup
2025-03-30 23:33:00,499 - root - INFO - No expired links found
2025-03-30 23:33:31,134 - database - INFO - Created new database session
2025-03-30 23:33:31,144 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-30 23:33:39,370 - database - INFO - Created new database session
2025-03-30 23:33:39,376 - app.links.router - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:33:39,376 - root - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:33:39,380 - root - INFO - Found 3 links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:33:47,409 - database - INFO - Created new database session
2025-03-30 23:33:47,413 - app.links.router - INFO - Getting expired links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:33:47,418 - database - ERROR - Error creating database session: 
2025-03-30 23:33:52,773 - database - INFO - Created new database session
2025-03-30 23:33:52,779 - app.links.router - INFO - Downloading expired links for user: c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:33:52,783 - database - ERROR - Error creating database session: 
2025-03-30 23:33:56,913 - database - INFO - Created new database session
2025-03-30 23:33:56,918 - app.links.router - INFO - Downloading links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:34:43,684 - database - INFO - Created new database session
2025-03-30 23:34:43,686 - app.links.router - INFO - Redirecting to link with short code: crunch
2025-03-30 23:34:43,687 - root - INFO - Redirect called for short_code: crunch
2025-03-30 23:34:43,688 - root - INFO - Cache: Getting link crunch
2025-03-30 23:34:43,694 - root - INFO - Cache: Link crunch not found
2025-03-30 23:34:43,695 - root - INFO - Cache: Getting stats for crunch
2025-03-30 23:34:43,698 - root - INFO - Cache: Stats for crunch not found
2025-03-30 23:34:43,704 - root - INFO - DB: is_soft_expire=True
2025-03-30 23:34:43,705 - root - INFO - DB: Updating expires_at from 2025-04-13 22:25:25.248722 to 2025-04-13 23:34:43.705687
2025-03-30 23:34:43,718 - root - INFO - Cache: Saving link crunch with original_url=https://www.crunchyroll.com/ru/
2025-03-30 23:34:43,720 - root - INFO - Cache: Link crunch saved successfully
2025-03-30 23:34:43,721 - root - INFO - Cache: Saving soft expire stats for crunch: expires_at=2025-04-13 23:34:43.705687, is_soft_expire=True
2025-03-30 23:34:43,723 - root - INFO - Redirecting to: https://www.crunchyroll.com/ru/
2025-03-30 23:34:48,022 - database - INFO - Created new database session
2025-03-30 23:34:48,022 - app.links.router - INFO - Redirecting to link with short code: crunch
2025-03-30 23:34:48,023 - root - INFO - Redirect called for short_code: crunch
2025-03-30 23:34:48,025 - root - INFO - Cache: Getting link crunch
2025-03-30 23:34:48,028 - root - INFO - Cache: Link crunch found
2025-03-30 23:34:48,029 - root - INFO - Cache: Getting stats for crunch
2025-03-30 23:34:48,031 - root - INFO - Cache: Stats for crunch found: is_soft_expire=True
2025-03-30 23:34:48,032 - root - INFO - Redirecting from cache
2025-03-30 23:34:48,033 - root - INFO - Cache: is_soft_expire=True
2025-03-30 23:34:48,034 - root - INFO - Cache: Updating expires_at to 2025-04-13 23:34:48.034450
2025-03-30 23:34:48,036 - root - INFO - Cache: Saving soft expire stats for crunch: expires_at=2025-04-13 23:34:48.034450, is_soft_expire=True
2025-03-30 23:34:48,041 - root - INFO - DB: Updating soft expire for crunch: from 2025-04-13 23:34:43.705687 to 2025-04-13 23:34:48.034450
2025-03-30 23:34:51,739 - database - INFO - Created new database session
2025-03-30 23:34:51,740 - app.links.router - INFO - Redirecting to link with short code: crunch
2025-03-30 23:34:51,741 - root - INFO - Redirect called for short_code: crunch
2025-03-30 23:34:51,743 - root - INFO - Cache: Getting link crunch
2025-03-30 23:34:51,745 - root - INFO - Cache: Link crunch found
2025-03-30 23:34:51,746 - root - INFO - Cache: Getting stats for crunch
2025-03-30 23:34:51,748 - root - INFO - Cache: Stats for crunch found: is_soft_expire=True
2025-03-30 23:34:51,749 - root - INFO - Redirecting from cache
2025-03-30 23:34:51,751 - root - INFO - Cache: is_soft_expire=True
2025-03-30 23:34:51,751 - root - INFO - Cache: Updating expires_at to 2025-04-13 23:34:51.751937
2025-03-30 23:34:51,753 - root - INFO - Cache: Saving soft expire stats for crunch: expires_at=2025-04-13 23:34:51.751937, is_soft_expire=True
2025-03-30 23:34:51,759 - root - INFO - DB: Updating soft expire for crunch: from 2025-04-13 23:34:48.034450 to 2025-04-13 23:34:51.751937
2025-03-30 23:35:23,092 - database - INFO - Created new database session
2025-03-30 23:35:23,096 - app.links.router - INFO - Getting stats for link crunch by user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:35:23,097 - root - INFO - Cache: Getting stats for crunch
2025-03-30 23:35:23,099 - root - INFO - Cache: Stats for crunch found: is_soft_expire=True
2025-03-30 23:35:23,099 - root - INFO - Cache: Getting link crunch
2025-03-30 23:35:23,101 - root - INFO - Cache: Link crunch found
2025-03-30 23:35:31,137 - database - INFO - Created new database session
2025-03-30 23:35:31,155 - app.links.router - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:35:31,156 - root - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:35:31,159 - root - INFO - Found 3 links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:35:52,741 - database - INFO - Created new database session
2025-03-30 23:35:52,748 - app.links.router - INFO - Creating new link for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:35:52,751 - root - INFO - Creating link with hard expire: expires_at=2025-03-30 23:40:00, is_soft_expire=False
2025-03-30 23:36:03,246 - database - INFO - Created new database session
2025-03-30 23:36:03,263 - app.links.router - INFO - Getting stats for link hsehse by user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:36:03,264 - root - INFO - Cache: Getting stats for hsehse
2025-03-30 23:36:03,266 - root - INFO - Cache: Stats for hsehse not found
2025-03-30 23:36:03,267 - root - INFO - Cache: Getting link hsehse
2025-03-30 23:36:03,268 - root - INFO - Cache: Link hsehse not found
2025-03-30 23:36:03,270 - root - INFO - Stats: Getting stats for hsehse: is_soft_expire=False, expires_at=2025-03-30 23:40:00
2025-03-30 23:36:03,271 - root - INFO - Cache: Saving link hsehse with original_url=https://www.hse.ru/
2025-03-30 23:36:03,274 - root - INFO - Cache: Link hsehse saved successfully
2025-03-30 23:36:03,275 - root - INFO - Cache: Saving hard expire stats for hsehse: is_soft_expire=False
2025-03-30 23:36:26,674 - database - INFO - Created new database session
2025-03-30 23:36:26,679 - app.links.router - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:36:26,680 - root - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:36:26,683 - root - INFO - Found 4 links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:36:44,191 - database - INFO - Created new database session
2025-03-30 23:36:44,192 - app.links.router - INFO - Redirecting to link with short code: hsehse
2025-03-30 23:36:44,193 - root - INFO - Redirect called for short_code: hsehse
2025-03-30 23:36:44,194 - root - INFO - Cache: Getting link hsehse
2025-03-30 23:36:44,198 - root - INFO - Cache: Link hsehse found
2025-03-30 23:36:44,198 - root - INFO - Cache: Getting stats for hsehse
2025-03-30 23:36:44,200 - root - INFO - Cache: Stats for hsehse found: is_soft_expire=False
2025-03-30 23:36:44,201 - root - INFO - Redirecting from cache
2025-03-30 23:36:44,202 - root - INFO - Cache: is_soft_expire=False
2025-03-30 23:36:44,204 - root - INFO - Cache: Saving hard expire stats for hsehse: is_soft_expire=False
2025-03-30 23:36:44,210 - root - INFO - DB: No expires_at update for hsehse: is_soft_expire=False
2025-03-30 23:36:49,705 - database - INFO - Created new database session
2025-03-30 23:36:49,705 - app.links.router - INFO - Redirecting to link with short code: hsehse
2025-03-30 23:36:49,706 - root - INFO - Redirect called for short_code: hsehse
2025-03-30 23:36:49,708 - root - INFO - Cache: Getting link hsehse
2025-03-30 23:36:49,712 - root - INFO - Cache: Link hsehse found
2025-03-30 23:36:49,713 - root - INFO - Cache: Getting stats for hsehse
2025-03-30 23:36:49,714 - root - INFO - Cache: Stats for hsehse found: is_soft_expire=False
2025-03-30 23:36:49,715 - root - INFO - Redirecting from cache
2025-03-30 23:36:49,717 - root - INFO - Cache: is_soft_expire=False
2025-03-30 23:36:49,717 - root - INFO - Cache: Saving hard expire stats for hsehse: is_soft_expire=False
2025-03-30 23:36:49,724 - root - INFO - DB: No expires_at update for hsehse: is_soft_expire=False
2025-03-30 23:36:53,711 - database - INFO - Created new database session
2025-03-30 23:36:53,712 - app.links.router - INFO - Redirecting to link with short code: hsehse
2025-03-30 23:36:53,713 - root - INFO - Redirect called for short_code: hsehse
2025-03-30 23:36:53,714 - root - INFO - Cache: Getting link hsehse
2025-03-30 23:36:53,717 - root - INFO - Cache: Link hsehse found
2025-03-30 23:36:53,719 - root - INFO - Cache: Getting stats for hsehse
2025-03-30 23:36:53,722 - root - INFO - Cache: Stats for hsehse found: is_soft_expire=False
2025-03-30 23:36:53,723 - root - INFO - Redirecting from cache
2025-03-30 23:36:53,724 - root - INFO - Cache: is_soft_expire=False
2025-03-30 23:36:53,725 - root - INFO - Cache: Saving hard expire stats for hsehse: is_soft_expire=False
2025-03-30 23:36:53,730 - root - INFO - DB: No expires_at update for hsehse: is_soft_expire=False
2025-03-30 23:37:04,034 - database - INFO - Created new database session
2025-03-30 23:37:04,039 - app.links.router - INFO - Getting stats for link hsehse by user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:37:04,040 - root - INFO - Cache: Getting stats for hsehse
2025-03-30 23:37:04,042 - root - INFO - Cache: Stats for hsehse found: is_soft_expire=False
2025-03-30 23:37:04,043 - root - INFO - Cache: Getting link hsehse
2025-03-30 23:37:04,044 - root - INFO - Cache: Link hsehse found
2025-03-30 23:37:12,048 - database - INFO - Created new database session
2025-03-30 23:37:12,049 - app.links.router - INFO - Redirecting to link with short code: hsehse
2025-03-30 23:37:12,050 - root - INFO - Redirect called for short_code: hsehse
2025-03-30 23:37:12,052 - root - INFO - Cache: Getting link hsehse
2025-03-30 23:37:12,055 - root - INFO - Cache: Link hsehse found
2025-03-30 23:37:12,056 - root - INFO - Cache: Getting stats for hsehse
2025-03-30 23:37:12,058 - root - INFO - Cache: Stats for hsehse found: is_soft_expire=False
2025-03-30 23:37:12,059 - root - INFO - Redirecting from cache
2025-03-30 23:37:12,061 - root - INFO - Cache: is_soft_expire=False
2025-03-30 23:37:12,062 - root - INFO - Cache: Saving hard expire stats for hsehse: is_soft_expire=False
2025-03-30 23:37:12,068 - root - INFO - DB: No expires_at update for hsehse: is_soft_expire=False
2025-03-30 23:37:15,198 - database - INFO - Created new database session
2025-03-30 23:37:15,199 - app.links.router - INFO - Redirecting to link with short code: hsehse
2025-03-30 23:37:15,200 - root - INFO - Redirect called for short_code: hsehse
2025-03-30 23:37:15,201 - root - INFO - Cache: Getting link hsehse
2025-03-30 23:37:15,203 - root - INFO - Cache: Link hsehse found
2025-03-30 23:37:15,204 - root - INFO - Cache: Getting stats for hsehse
2025-03-30 23:37:15,206 - root - INFO - Cache: Stats for hsehse found: is_soft_expire=False
2025-03-30 23:37:15,207 - root - INFO - Redirecting from cache
2025-03-30 23:37:15,209 - root - INFO - Cache: is_soft_expire=False
2025-03-30 23:37:15,210 - root - INFO - Cache: Saving hard expire stats for hsehse: is_soft_expire=False
2025-03-30 23:37:15,215 - root - INFO - DB: No expires_at update for hsehse: is_soft_expire=False
2025-03-30 23:37:22,009 - database - INFO - Created new database session
2025-03-30 23:37:22,013 - app.links.router - INFO - Getting stats for link hsehse by user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:37:22,014 - root - INFO - Cache: Getting stats for hsehse
2025-03-30 23:37:22,016 - root - INFO - Cache: Stats for hsehse found: is_soft_expire=False
2025-03-30 23:37:22,017 - root - INFO - Cache: Getting link hsehse
2025-03-30 23:37:22,018 - root - INFO - Cache: Link hsehse found
2025-03-30 23:38:11,734 - database - INFO - Created new database session
2025-03-30 23:38:11,739 - app.links.router - INFO - Searching for link with original URL: https://www.crunchyroll.com/ru/ by user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:38:11,740 - root - INFO - Searching for URL: https://www.crunchyroll.com/ru/ for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:38:11,744 - root - INFO - Found 2 links for URL: https://www.crunchyroll.com/ru/
2025-03-30 23:38:23,309 - database - INFO - Created new database session
2025-03-30 23:38:23,313 - app.links.router - INFO - Deleting link crunch by user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:38:23,314 - root - INFO - Deleting link crunch for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:38:23,321 - root - INFO - Cache: Deleting link crunch
2025-03-30 23:38:23,322 - root - INFO - Cache: Link crunch deleted successfully
2025-03-30 23:38:23,323 - root - INFO - Link crunch deleted successfully
2025-03-30 23:38:29,152 - database - INFO - Created new database session
2025-03-30 23:38:29,161 - app.links.router - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:38:29,161 - root - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:38:29,165 - root - INFO - Found 3 links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:38:50,489 - database - INFO - Created new database session
2025-03-30 23:38:50,496 - app.links.router - INFO - Updating link hse_test by user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:38:50,497 - root - INFO - Updating short code for hse_test to HSE
2025-03-30 23:38:50,507 - root - INFO - Cache: Deleting link hse_test
2025-03-30 23:38:50,509 - root - INFO - Cache: Link hse_test deleted successfully
2025-03-30 23:38:50,510 - root - INFO - Short code updated successfully from hse_test to HSE
2025-03-30 23:38:59,157 - database - INFO - Created new database session
2025-03-30 23:38:59,161 - app.links.router - INFO - Getting stats for link HSE by user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:38:59,162 - root - INFO - Cache: Getting stats for HSE
2025-03-30 23:38:59,163 - root - INFO - Cache: Stats for HSE not found
2025-03-30 23:38:59,164 - root - INFO - Cache: Getting link HSE
2025-03-30 23:38:59,165 - root - INFO - Cache: Link HSE not found
2025-03-30 23:38:59,167 - root - INFO - Stats: Getting stats for HSE: is_soft_expire=False, expires_at=2025-04-13 23:04:37.374599
2025-03-30 23:38:59,168 - root - INFO - Cache: Saving link HSE with original_url=https://www.hse.ru/
2025-03-30 23:38:59,169 - root - INFO - Cache: Link HSE saved successfully
2025-03-30 23:38:59,170 - root - INFO - Cache: Saving hard expire stats for HSE: is_soft_expire=False
2025-03-30 23:39:06,114 - database - INFO - Created new database session
2025-03-30 23:39:06,120 - app.links.router - INFO - Getting expired links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:39:06,123 - database - ERROR - Error creating database session: 
2025-03-30 23:39:09,960 - database - INFO - Created new database session
2025-03-30 23:39:10,002 - app.links.router - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:39:10,004 - root - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:39:10,008 - root - INFO - Found 3 links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:39:48,160 - database - INFO - Created new database session
2025-03-30 23:39:48,175 - app.links.router - INFO - Creating new link for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:39:48,182 - root - INFO - Creating link with hard expire: expires_at=2025-03-30 23:45:00, is_soft_expire=False
2025-03-30 23:39:59,179 - database - INFO - Created new database session
2025-03-30 23:39:59,181 - app.links.router - INFO - Redirecting to link with short code: rollroll
2025-03-30 23:39:59,182 - root - INFO - Redirect called for short_code: rollroll
2025-03-30 23:39:59,184 - root - INFO - Cache: Getting link rollroll
2025-03-30 23:39:59,187 - root - INFO - Cache: Link rollroll not found
2025-03-30 23:39:59,188 - root - INFO - Cache: Getting stats for rollroll
2025-03-30 23:39:59,191 - root - INFO - Cache: Stats for rollroll not found
2025-03-30 23:39:59,194 - root - INFO - DB: is_soft_expire=False
2025-03-30 23:39:59,198 - root - INFO - Cache: Saving link rollroll with original_url=https://www.crunchyroll.com/ru//
2025-03-30 23:39:59,200 - root - INFO - Cache: Link rollroll saved successfully
2025-03-30 23:39:59,202 - root - INFO - Cache: Saving hard expire stats for rollroll: is_soft_expire=False
2025-03-30 23:39:59,205 - root - INFO - Redirecting to: https://www.crunchyroll.com/ru//
2025-03-30 23:40:01,981 - database - INFO - Created new database session
2025-03-30 23:40:01,983 - app.links.router - INFO - Redirecting to link with short code: rollroll
2025-03-30 23:40:01,994 - root - INFO - Redirect called for short_code: rollroll
2025-03-30 23:40:02,006 - root - INFO - Cache: Getting link rollroll
2025-03-30 23:40:02,042 - root - INFO - Cache: Link rollroll found
2025-03-30 23:40:02,053 - root - INFO - Cache: Getting stats for rollroll
2025-03-30 23:40:02,057 - root - INFO - Cache: Stats for rollroll found: is_soft_expire=False
2025-03-30 23:40:02,075 - root - INFO - Redirecting from cache
2025-03-30 23:40:02,094 - root - INFO - Cache: is_soft_expire=False
2025-03-30 23:40:02,104 - root - INFO - Cache: Saving hard expire stats for rollroll: is_soft_expire=False
2025-03-30 23:40:02,123 - root - INFO - DB: No expires_at update for rollroll: is_soft_expire=False
2025-03-30 23:40:06,154 - database - INFO - Created new database session
2025-03-30 23:40:06,155 - app.links.router - INFO - Redirecting to link with short code: rollroll
2025-03-30 23:40:06,157 - root - INFO - Redirect called for short_code: rollroll
2025-03-30 23:40:06,162 - root - INFO - Cache: Getting link rollroll
2025-03-30 23:40:06,169 - root - INFO - Cache: Link rollroll found
2025-03-30 23:40:06,174 - root - INFO - Cache: Getting stats for rollroll
2025-03-30 23:40:06,177 - root - INFO - Cache: Stats for rollroll found: is_soft_expire=False
2025-03-30 23:40:06,179 - root - INFO - Redirecting from cache
2025-03-30 23:40:06,181 - root - INFO - Cache: is_soft_expire=False
2025-03-30 23:40:06,183 - root - INFO - Cache: Saving hard expire stats for rollroll: is_soft_expire=False
2025-03-30 23:40:06,191 - root - INFO - DB: No expires_at update for rollroll: is_soft_expire=False
2025-03-30 23:40:09,307 - database - INFO - Created new database session
2025-03-30 23:40:09,308 - app.links.router - INFO - Redirecting to link with short code: rollroll
2025-03-30 23:40:09,309 - root - INFO - Redirect called for short_code: rollroll
2025-03-30 23:40:09,310 - root - INFO - Cache: Getting link rollroll
2025-03-30 23:40:09,313 - root - INFO - Cache: Link rollroll found
2025-03-30 23:40:09,315 - root - INFO - Cache: Getting stats for rollroll
2025-03-30 23:40:09,321 - root - INFO - Cache: Stats for rollroll found: is_soft_expire=False
2025-03-30 23:40:09,323 - root - INFO - Redirecting from cache
2025-03-30 23:40:09,324 - root - INFO - Cache: is_soft_expire=False
2025-03-30 23:40:09,325 - root - INFO - Cache: Saving hard expire stats for rollroll: is_soft_expire=False
2025-03-30 23:40:09,330 - root - INFO - DB: No expires_at update for rollroll: is_soft_expire=False
2025-03-30 23:40:12,406 - database - INFO - Created new database session
2025-03-30 23:40:12,407 - app.links.router - INFO - Redirecting to link with short code: rollroll
2025-03-30 23:40:12,408 - root - INFO - Redirect called for short_code: rollroll
2025-03-30 23:40:12,410 - root - INFO - Cache: Getting link rollroll
2025-03-30 23:40:12,412 - root - INFO - Cache: Link rollroll found
2025-03-30 23:40:12,413 - root - INFO - Cache: Getting stats for rollroll
2025-03-30 23:40:12,416 - root - INFO - Cache: Stats for rollroll found: is_soft_expire=False
2025-03-30 23:40:12,418 - root - INFO - Redirecting from cache
2025-03-30 23:40:12,420 - root - INFO - Cache: is_soft_expire=False
2025-03-30 23:40:12,421 - root - INFO - Cache: Saving hard expire stats for rollroll: is_soft_expire=False
2025-03-30 23:40:12,425 - root - INFO - DB: No expires_at update for rollroll: is_soft_expire=False
2025-03-30 23:40:16,624 - database - INFO - Created new database session
2025-03-30 23:40:16,625 - app.links.router - INFO - Redirecting to link with short code: rollroll
2025-03-30 23:40:16,626 - root - INFO - Redirect called for short_code: rollroll
2025-03-30 23:40:16,628 - root - INFO - Cache: Getting link rollroll
2025-03-30 23:40:16,630 - root - INFO - Cache: Link rollroll found
2025-03-30 23:40:16,631 - root - INFO - Cache: Getting stats for rollroll
2025-03-30 23:40:16,633 - root - INFO - Cache: Stats for rollroll found: is_soft_expire=False
2025-03-30 23:40:16,634 - root - INFO - Redirecting from cache
2025-03-30 23:40:16,635 - root - INFO - Cache: is_soft_expire=False
2025-03-30 23:40:16,637 - root - INFO - Cache: Saving hard expire stats for rollroll: is_soft_expire=False
2025-03-30 23:40:16,642 - root - INFO - DB: No expires_at update for rollroll: is_soft_expire=False
2025-03-30 23:40:29,205 - database - INFO - Created new database session
2025-03-30 23:40:29,209 - app.links.router - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:40:29,210 - root - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:40:29,213 - root - INFO - Found 4 links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:40:42,430 - database - INFO - Created new database session
2025-03-30 23:40:42,434 - app.links.router - INFO - Getting stats for link rollroll by user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:40:42,435 - root - INFO - Cache: Getting stats for rollroll
2025-03-30 23:40:42,437 - root - INFO - Cache: Stats for rollroll found: is_soft_expire=False
2025-03-30 23:40:42,437 - root - INFO - Cache: Getting link rollroll
2025-03-30 23:40:42,439 - root - INFO - Cache: Link rollroll found
2025-03-30 23:41:01,506 - database - INFO - Created new database session
2025-03-30 23:41:01,511 - app.links.router - INFO - Downloading links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:41:07,116 - database - INFO - Created new database session
2025-03-30 23:41:07,120 - app.links.router - INFO - Getting expired links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:41:07,123 - database - ERROR - Error creating database session: 
2025-03-30 23:41:13,918 - database - INFO - Created new database session
2025-03-30 23:41:13,924 - app.links.router - INFO - Searching for link with original URL: https://www.crunchyroll.com/ru/ by user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:41:13,925 - root - INFO - Searching for URL: https://www.crunchyroll.com/ru/ for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:41:13,929 - root - INFO - Found 1 links for URL: https://www.crunchyroll.com/ru/
2025-03-30 23:41:16,473 - database - INFO - Created new database session
2025-03-30 23:41:16,479 - app.links.router - INFO - Searching for link with original URL: https://www.crunchyroll.com/ru/ by user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:41:16,480 - root - INFO - Searching for URL: https://www.crunchyroll.com/ru/ for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:41:16,482 - root - INFO - Found 1 links for URL: https://www.crunchyroll.com/ru/
2025-03-30 23:41:29,269 - database - INFO - Created new database session
2025-03-30 23:41:29,274 - app.links.router - INFO - Searching for link with original URL: https://www.crunchyroll.com/ru/ by user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:41:29,275 - root - INFO - Searching for URL: https://www.crunchyroll.com/ru/ for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:41:29,278 - root - INFO - Found 1 links for URL: https://www.crunchyroll.com/ru/
2025-03-30 23:41:36,054 - database - INFO - Created new database session
2025-03-30 23:41:36,059 - app.links.router - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:41:36,059 - root - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:41:36,061 - root - INFO - Found 4 links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:41:59,074 - database - INFO - Created new database session
2025-03-30 23:41:59,078 - app.links.router - INFO - Searching for link with original URL: https://www.hse.ru/ by user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:41:59,079 - root - INFO - Searching for URL: https://www.hse.ru/ for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:41:59,082 - root - INFO - Found 2 links for URL: https://www.hse.ru/
2025-03-30 23:42:07,129 - database - INFO - Created new database session
2025-03-30 23:42:07,137 - app.links.router - INFO - Updating link hse_test by user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:42:07,138 - root - INFO - Updating short code for hse_test to HSE
2025-03-30 23:42:07,141 - root - ERROR - Link hse_test not found
2025-03-30 23:42:07,143 - database - ERROR - Error creating database session: 
2025-03-30 23:42:21,964 - database - INFO - Created new database session
2025-03-30 23:42:21,971 - app.links.router - INFO - Updating link rollroll by user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:42:21,971 - root - INFO - Updating short code for rollroll to rollingroll
2025-03-30 23:42:21,979 - root - INFO - Cache: Deleting link rollroll
2025-03-30 23:42:21,980 - root - INFO - Cache: Link rollroll deleted successfully
2025-03-30 23:42:21,981 - root - INFO - Short code updated successfully from rollroll to rollingroll
2025-03-30 23:42:26,388 - database - INFO - Created new database session
2025-03-30 23:42:26,393 - app.links.router - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:42:26,394 - root - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:42:26,396 - root - INFO - Found 4 links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:42:54,848 - database - INFO - Created new database session
2025-03-30 23:42:54,849 - app.links.router - INFO - Redirecting to link with short code: rollingroll
2025-03-30 23:42:54,850 - root - INFO - Redirect called for short_code: rollingroll
2025-03-30 23:42:54,852 - root - INFO - Cache: Getting link rollingroll
2025-03-30 23:42:54,857 - root - INFO - Cache: Link rollingroll not found
2025-03-30 23:42:54,858 - root - INFO - Cache: Getting stats for rollingroll
2025-03-30 23:42:54,860 - root - INFO - Cache: Stats for rollingroll not found
2025-03-30 23:42:54,864 - root - INFO - DB: is_soft_expire=False
2025-03-30 23:42:54,869 - root - INFO - Cache: Saving link rollingroll with original_url=https://www.crunchyroll.com/ru//
2025-03-30 23:42:54,872 - root - INFO - Cache: Link rollingroll saved successfully
2025-03-30 23:42:54,872 - root - INFO - Cache: Saving hard expire stats for rollingroll: is_soft_expire=False
2025-03-30 23:42:54,875 - root - INFO - Redirecting to: https://www.crunchyroll.com/ru//
2025-03-30 23:42:59,004 - root - INFO - Starting expired links cleanup
2025-03-30 23:42:59,009 - root - INFO - Found 1 expired links
2025-03-30 23:42:59,011 - root - INFO - Moving expired link hsehse to expired_links table for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:42:59,012 - root - INFO - Cache: Deleting link hsehse
2025-03-30 23:42:59,017 - root - INFO - Cache: Link hsehse deleted successfully
2025-03-30 23:42:59,026 - root - INFO - Successfully processed 1 expired links
2025-03-30 23:43:00,488 - root - INFO - Starting expired links cleanup
2025-03-30 23:43:00,493 - root - INFO - No expired links found
2025-03-30 23:43:07,656 - database - INFO - Created new database session
2025-03-30 23:43:07,661 - app.links.router - INFO - Getting stats for link rollingroll by user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:43:07,662 - root - INFO - Cache: Getting stats for rollingroll
2025-03-30 23:43:07,664 - root - INFO - Cache: Stats for rollingroll found: is_soft_expire=False
2025-03-30 23:43:07,665 - root - INFO - Cache: Getting link rollingroll
2025-03-30 23:43:07,667 - root - INFO - Cache: Link rollingroll found
2025-03-30 23:48:08,922 - database - INFO - Created new database session
2025-03-30 23:48:08,933 - app.links.router - INFO - Getting expired links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:51:15,222 - database - INFO - Created new database session
2025-03-30 23:51:15,227 - app.links.router - INFO - Getting expired links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:52:16,099 - database - INFO - Created new database session
2025-03-30 23:52:16,105 - app.links.router - INFO - Getting expired links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:52:59,162 - root - INFO - Starting expired links cleanup
2025-03-30 23:52:59,167 - root - INFO - Found 1 expired links
2025-03-30 23:52:59,168 - root - INFO - Moving expired link rollingroll to expired_links table for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:52:59,170 - root - INFO - Cache: Deleting link rollingroll
2025-03-30 23:52:59,172 - root - INFO - Cache: Link rollingroll deleted successfully
2025-03-30 23:52:59,178 - root - INFO - Successfully processed 1 expired links
2025-03-30 23:53:00,602 - root - INFO - Starting expired links cleanup
2025-03-30 23:53:00,608 - root - INFO - No expired links found
2025-03-30 23:54:57,842 - database - INFO - Created new database session
2025-03-30 23:54:57,846 - app.links.router - INFO - Getting expired links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:55:11,605 - database - INFO - Created new database session
2025-03-30 23:55:11,611 - app.links.router - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:55:11,611 - root - INFO - Getting all links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:55:11,614 - root - INFO - Found 2 links for user c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:55:17,899 - database - INFO - Created new database session
2025-03-30 23:55:17,904 - app.links.router - INFO - Downloading expired links for user: c6b3f274-f1f6-4905-91ec-69f92266a3e4
2025-03-30 23:56:10,804 - database - INFO - Created new database session
2025-03-30 23:56:10,808 - database - ERROR - Error creating database session: 'LinkReactivateRequest' object has no attribute 'link_id'
2025-03-30 23:56:23,608 - database - INFO - Created new database session
2025-03-30 23:56:23,616 - database - ERROR - Error creating database session: 'LinkReactivateRequest' object has no attribute 'link_id'
2025-03-31 00:01:05,079 - database - INFO - Created new database session
2025-03-31 00:01:05,107 - database - ERROR - Error creating database session: 'LinkReactivateRequest' object has no attribute 'link_id'
